{"version":3,"sources":["wwwroot/js/CommerceDefault/pages/shoppingcart-detail.js"],"names":["listQuantities","summaryElement","btnReloadShopingCartTable","btnRemoveRows","btnUpdateQuantity","processListItemShopingCartTable","document","querySelectorAll","i","length","Quantity","Init","reloadCartMoney","init","querySelector","getElementById","removeCartItemComplete","click","rowItems","summaryMoney","quantytyElement","quantity","value","priceUnit","getUnitPrice","JSON","parse","dataset","price","innerHTML","WNumbHelper","GetFrNumber","itemMoney","lsitPrices","money","j","addEventListener"],"mappings":"AAAA,aAEA,IAAIA,eAAgBC,eAAgBC,0BAA2BC,cAAeC,kBAS9E,SAASC,kCACPL,eAAiBM,SAASC,iBAAiB,cAE3C,IAAK,IAAIC,EAAI,EAAGA,EAAIR,eAAeS,OAAQD,IAAK,EAC/B,IAAIE,UACVC,KAAKX,eAAeQ,GAAII,kBAIrC,SAASC,OACPZ,eAAiBK,SAASQ,cAAc,kBACxCZ,0BAA4BI,SAASQ,cAAc,2DACnDV,kBAAoBE,SAASS,eAAe,qBAG9C,SAASC,yBACPd,0BAA0Be,QAG5B,SAASL,kBAIP,IAHA,IAAIM,EAAWZ,SAASC,iBAAiB,mBACrCY,EAAe,EAEVX,EAAI,EAAGA,EAAIU,EAAST,OAAQD,IAAK,CACxC,IAAIY,EAAkBF,EAASV,GAAGM,cAAc,cAC5CO,GAAYH,EAASV,GAAGM,cAAc,mBAAmBQ,MACzDC,EAAYC,aAAaC,KAAKC,MAAMN,EAAgBO,QAAQC,OAAQP,GACjDH,EAASV,GAAGM,cAAc,qBAChCe,UAAYC,YAAYC,YAAYR,GACrD,IACIS,EAAYT,EAAYF,EAC5BF,GAAgBa,EAFAd,EAASV,GAAGM,cAAc,qBAGhCe,UAAYC,YAAYC,YAAYC,GAG9B1B,SAASQ,cAAc,kBAC7Be,UAAYC,YAAYC,YAAYZ,GAChDf,kBAAkBa,QAGpB,SAASO,aAAaS,EAAYZ,GAGhC,IAFA,IAAIE,EAAYU,EAAWA,EAAWxB,OAAS,GAAGyB,MAEzCC,EAAIF,EAAWxB,OAAS,EAAQ,GAAL0B,KACH,IAA3BF,EAAWE,GAAGd,UAAkBA,GAAYY,EAAWE,GAAGd,UADpBc,IAK1CZ,EAAYU,EAAWE,GAAGD,MAG5B,OAAOX,EA3DTjB,SAAS8B,iBAAiB,mBAAoB,WAC5CvB,OACAX,0BAA0Be","file":"shoppingcart-detail.min.js","sourcesContent":["\"use strict\";\n\nvar listQuantities, summaryElement, btnReloadShopingCartTable, btnRemoveRows, btnUpdateQuantity;\ndocument.addEventListener(\"DOMContentLoaded\", function () {\n  init();\n  btnReloadShopingCartTable.click(); //for (var j = 0; j < btnRemoveRows.length; j++) {\n  //    btnRemoveRows[j].addEventListener(\"click\", function(eve) {\n  //    });\n  //}\n});\n\nfunction processListItemShopingCartTable() {\n  listQuantities = document.querySelectorAll(\"._quantity\");\n\n  for (var i = 0; i < listQuantities.length; i++) {\n    var quantity = new Quantity();\n    quantity.Init(listQuantities[i], reloadCartMoney);\n  }\n}\n\nfunction init() {\n  summaryElement = document.querySelector(\"[data-summary]\");\n  btnReloadShopingCartTable = document.querySelector(\"#frmLazyLoadShopingCartTable #btnReloadShopingCartTable\");\n  btnUpdateQuantity = document.getElementById(\"btnUpdateQuantity\");\n}\n\nfunction removeCartItemComplete() {\n  btnReloadShopingCartTable.click();\n}\n\nfunction reloadCartMoney() {\n  var rowItems = document.querySelectorAll(\"[data-class-id]\");\n  var summaryMoney = 0;\n\n  for (var i = 0; i < rowItems.length; i++) {\n    var quantytyElement = rowItems[i].querySelector(\"._quantity\");\n    var quantity = +rowItems[i].querySelector(\"[data-quantity]\").value;\n    var priceUnit = getUnitPrice(JSON.parse(quantytyElement.dataset.price), quantity);\n    var unitPriceElement = rowItems[i].querySelector(\"[data-unit-price]\");\n    unitPriceElement.innerHTML = WNumbHelper.GetFrNumber(priceUnit);\n    var itemPrice = rowItems[i].querySelector(\"[data-item-price]\");\n    var itemMoney = priceUnit * quantity;\n    summaryMoney += itemMoney;\n    itemPrice.innerHTML = WNumbHelper.GetFrNumber(itemMoney);\n  }\n\n  var summaryItem = document.querySelector(\"[data-summary]\");\n  summaryItem.innerHTML = WNumbHelper.GetFrNumber(summaryMoney);\n  btnUpdateQuantity.click();\n}\n\nfunction getUnitPrice(lsitPrices, quantity) {\n  var priceUnit = lsitPrices[lsitPrices.length - 1].money;\n\n  for (var j = lsitPrices.length - 1; j >= 0; j--) {\n    if (lsitPrices[j].quantity !== 0 && quantity >= lsitPrices[j].quantity) {\n      break;\n    }\n\n    priceUnit = lsitPrices[j].money;\n  }\n\n  return priceUnit;\n}"]}