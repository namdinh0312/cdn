{"version":3,"sources":["wwwroot/js/CommerceDefault/pages/product-detail.js"],"names":["listQuantities","chkOutOfStock","txtQuantity","attribute1Items","attribute2Items","productClassificationId","dataPrice","newestPostsContainer","activeProductClass","subscribeButton","discountPercentEle","flashSaleContainer","dataCountEle","dataProcessBarEle","dataDelPrice","listSections","dataHead","isFistLoad","didScroll","isClick","innitFileUpload","imputDocumentFile","document","getElementById","curentImageContactFilePath","dataset","curentPathFiles","curentImageContactBackgroundUrl","curentShowingImages","dataMaxFile","maxFile","dataMaxSize","maxSize","FileUpload","Init","console","log","clearform","$","reset","imageReverContainer","innerHTML","loadScrollNav","btnNavs","querySelectorAll","i","length","addEventListener","eve","Site","ScrollToElement","currentTarget","target","processFancybox","processAnonymousUser","canvases","canvas","nameSplit","userName","split","initials","charAt","toUpperCase","context","getContext","canvasCssWidth","width","canvasCssHeight","height","window","devicePixelRatio","setAttribute","style","scale","fillStyle","stringToHslColor","fillRect","font","textAlign","fillText","str","s","l","hash","charCodeAt","init","LockOnsCroll","Quantity","reloadMoneyAndQuantity","loadJqueryZoom","JsBarcode","e","load360Spin","atiCopyRight","PushNotifications","initialize","submitProductWidgetAction","LocalStorageHelper","LogCategory","productCategoryId","thumnailSrc","querySelector","firstThumnail","LogProductClassIdView","activeProductClassification","value","href","click","zDockInterval","setInterval","sectionActive","getBoundingClientRect","y","section","sessionActive","loadFlashSaleSwiper","bLazy","load","isMobile","isDesktop","slidesPerView","Swiper","spaceBetween","slidesPerGroup","loop","loopFillGroupWithBlank","lazy","loadPrevNext","preloadImages","autoplay","delay","disableOnInteraction","navigation","nextEl","prevEl","itemListElement","text","innerText","url","attributes","fakaH3Tag","createElement","classList","atag","location","hostname","alt","appendChild","container","insertBefore","attributeValue1","attributeValue2","selectedQuantityInfo","listPriceInfo","filter","item","attribute1Value","attribute2Value","LoadSwiperDefault","SlideToProductClass","history","replaceState","quantity","checked","max","selectedClassItem","quantitiesPrices","quantitiesPrice","priceUnit","money","range","WNumbHelper","GetFrNumber","price","visibility","add","delPrice","remove","discountPercent","isFlashSale","Number","toFixed","removeAttribute","valueQuantity","flashDealCountDown","countDownTime","checkTimeCountDown","countDownQuantity","maxHours","hours","maxValueQuantity","frmAddToCart","productId","productClassSelected","productClassName","productName","EnhancedEcommerce","AddImpression","updateAnalytic","AddProduct","btnByNowClick","spritespin","source","image360Sources","Math","min","sense","frameTime","responsive","ratingCompleteCallBack","imageThumnails","Drift","paneContainer"],"mappings":"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","file":"product-detail.min.js","sourcesContent":["\"use strict\";\n\nvar listQuantities, chkOutOfStock, txtQuantity, attribute1Items, attribute2Items, productClassificationId, dataPrice, newestPostsContainer;\nvar activeProductClass;\nvar subscribeButton, discountPercentEle;\nvar flashSaleContainer, dataCountEle, dataProcessBarEle, dataDelPrice;\nvar isFistLoad = true;\nvar didScroll = false,\n    listSections,\n    dataHead,\n    isClick = false;\ndocument.addEventListener(\"DOMContentLoaded\", function () {\n  init();\n  Site.LockOnsCroll = false;\n  var i;\n\n  for (i = 0; i < listQuantities.length; i++) {\n    var quantity = new Quantity();\n    quantity.Init(listQuantities[i], reloadMoneyAndQuantity);\n  }\n\n  for (i = 0; i < attribute1Items.length; i++) {\n    attribute1Items[i].addEventListener(\"change\", reloadMoneyAndQuantity);\n  }\n\n  for (i = 0; i < attribute2Items.length; i++) {\n    attribute2Items[i].addEventListener(\"change\", reloadMoneyAndQuantity);\n  }\n\n  reloadMoneyAndQuantity();\n  loadJqueryZoom();\n\n  try {\n    JsBarcode(\"._barcode\").init();\n  } catch (e) {\n    console.log(e);\n  }\n\n  load360Spin();\n  atiCopyRight(); //subscribeButton = document.getElementById('btnSubscribe');\n  //if (!!subscribeButton) {\n  //    subscribeButton.addEventListener('click',\n  //        function () {\n  //            PushNotifications.subscribeForPushNotifications(subscribeCallBack);\n  //        });\n  //}\n\n  PushNotifications.initialize();\n  submitProductWidgetAction(\"[data-related-products]\");\n  loadScrollNav();\n  LocalStorageHelper.LogCategory(productCategoryId, true, false, false, false);\n  var thumnailSrc = document.querySelector(\"[data-first-thumnail]\").dataset.firstThumnail;\n  LocalStorageHelper.LogProductClassIdView(activeProductClass.dataset.activeProductClassification, document.querySelector('[name=ProductName]').value, thumnailSrc, document.querySelector(\"link[rel='canonical']\").href);\n  processAnonymousUser();\n  innitFileUpload();\n  document.getElementById(\"btnReloadRatings\").click();\n});\n\nfunction innitFileUpload() {\n  //----------------\n  //----------------\n  var imputDocumentFile = document.getElementById(\"inputRatingFormFile\");\n  var curentImageContactFilePath = !!imputDocumentFile.dataset.curentPathFiles && imputDocumentFile.dataset.curentPathFiles !== \"\" ? [imputDocumentFile.dataset.curentPathFiles] : null;\n  var curentImageContactBackgroundUrl = !!imputDocumentFile.dataset.curentShowingImages && imputDocumentFile.dataset.curentShowingImages !== \"\" ? [imputDocumentFile.dataset.curentShowingImages] : null; //\n\n  var dataMaxFile = !!imputDocumentFile.dataset.maxFile && imputDocumentFile.dataset.maxFile !== \"\" ? +imputDocumentFile.dataset.maxFile : 3;\n  var dataMaxSize = !!imputDocumentFile.dataset.maxFile && imputDocumentFile.dataset.maxSize !== \"\" ? +imputDocumentFile.dataset.maxSize : 5; //\n\n  var fileUploadNewReview = new FileUpload();\n  fileUploadNewReview.Init(null, curentImageContactFilePath, curentImageContactBackgroundUrl, \"#inputRatingFormFile\", //file\n  \"#newReviewContainer\", //review showing\n  \"#newReviewContainer\", //new showing\n  \"#frmProductRating\", dataMaxFile, console.log(\"change\"), true, \"RatingFormFile\", dataMaxSize); //unique name\n} //contact\n\n\nfunction clearform() {\n  $('#frmProductRating')[0].reset();\n  var imageReverContainer = document.getElementById(\"newReviewContainer\");\n\n  if (!!imageReverContainer) {\n    imageReverContainer.innerHTML = \"\";\n  }\n}\n\nfunction loadScrollNav() {\n  var btnNavs = document.querySelectorAll(\"[data-nav-product-detail] button\");\n\n  for (var i = 0; i < btnNavs.length; i++) {\n    btnNavs[i].addEventListener(\"click\", function (eve) {\n      //Site.LockOnsCroll = true;\n      Site.ScrollToElement(\"[data-section='\" + eve.currentTarget.dataset.target + \"']\"); //setTimeout(function () {\n      //    //Site.LockOnsCroll = false;\n      //    document.querySelector(\"[data-head]\").classList.remove(\"_zDocActive\");\n      //}, 3000);\n    });\n  } //window.onscroll = function () {\n  //    if (!Site.LockOnsCroll) {\n  //        updateZDocActive();\n  //    }\n  //};\n\n}\n\nfunction processFancybox() {\n  debugger; //$(\"a._z-fancyBox\").fancybox();\n}\n\nfunction processAnonymousUser() {\n  var canvases = document.querySelectorAll(\"._id-listRatings canvas\");\n\n  for (var i = 0; i < canvases.length; i++) {\n    var canvas = canvases[i];\n    var name = canvas.dataset.userName,\n        nameSplit = name.split(\" \"),\n        initials = nameSplit.length > 2 ? nameSplit[0].charAt(0).toUpperCase() + nameSplit[1].charAt(0).toUpperCase() : nameSplit[0].charAt(0).toUpperCase();\n    var context = canvas.getContext(\"2d\");\n    var canvasCssWidth = canvas.width,\n        canvasCssHeight = canvas.height;\n\n    if (window.devicePixelRatio) {\n      canvas.setAttribute(\"width\", canvasCssWidth * window.devicePixelRatio);\n      canvas.setAttribute(\"height\", canvasCssHeight * window.devicePixelRatio);\n      canvas.style.width = canvasCssWidth + \"px\";\n      canvas.style.height = canvasCssHeight + \"px\";\n      context.scale(window.devicePixelRatio, window.devicePixelRatio);\n    }\n\n    context.fillStyle = stringToHslColor(initials, 30, 80);\n    context.fillRect(0, 0, canvas.width, canvas.height);\n    context.font = canvasCssHeight / 2 + \"px Arial\";\n    context.textAlign = \"center\";\n    context.fillStyle = \"#FFF\";\n    context.fillText(initials, canvasCssWidth / 2, canvasCssHeight / 1.5);\n  }\n}\n\nfunction stringToHslColor(str, s, l) {\n  var hash = 0;\n\n  for (var i = 0; i < str.length; i++) {\n    hash = str.charCodeAt(i) + ((hash << 5) - hash);\n  }\n\n  var h = hash % 360;\n  return 'hsl(' + h + ', ' + s + '%, ' + l + '%)';\n}\n\nvar zDockInterval = setInterval(function () {\n  var sectionActive = 1;\n\n  for (var i = 0; i < listSections.length; i++) {\n    if (!listSections[i]) {\n      continue;\n    }\n\n    if (listSections[i].getBoundingClientRect().y < 5) {\n      sectionActive = listSections[i].dataset.section;\n    }\n  }\n\n  dataHead.dataset.sessionActive = sectionActive;\n}, 100); //\n\nfunction loadFlashSaleSwiper() {\n  Site.bLazy.load(document.querySelectorAll(\".swiper-flashsale-container img\", true), false);\n  var isMobile = document.querySelector(\"[data-device=Mobile]\");\n  var isDesktop = document.querySelector(\"[data-device=Desktop]\");\n  var slidesPerView = 4;\n\n  if (isMobile) {\n    slidesPerView = 2;\n  } else if (!isDesktop) {\n    slidesPerView = 3;\n  }\n\n  var flashSales = new Swiper('.swiper-flashsale-container', {\n    slidesPerView: slidesPerView,\n    spaceBetween: -1,\n    slidesPerGroup: slidesPerView,\n    loop: false,\n    loopFillGroupWithBlank: true,\n    //pagination: {\n    //    el: '.swiper-pagination',\n    //    clickable: true,\n    //},\n    lazy: {\n      loadPrevNext: true\n    },\n    preloadImages: false,\n    autoplay: {\n      delay: 4000,\n      disableOnInteraction: false\n    },\n    navigation: {\n      nextEl: '.swiper-button-next',\n      prevEl: '.swiper-button-prev'\n    }\n  });\n}\n\nfunction atiCopyRight() {\n  var itemListElement = document.querySelector(\"[itemprop='itemListElement']:last-child\");\n  var text = itemListElement.innerText;\n  var url = itemListElement.querySelector(\"[content]\").attributes[\"content\"].value;\n  var fakaH3Tag = document.createElement(\"h3\");\n  fakaH3Tag.classList = \"d-none\";\n  var atag = document.createElement(\"a\");\n  atag.innerText = \"Nguồn: \" + text + \" tại \" + window.location.hostname + \"\";\n  atag.href = url;\n  atag.alt = \"Chi tiết sản phẩm \" + text + \" tại \" + window.location.hostname + \". \";\n  atag.classList = \"_atyc\";\n  atag.setAttribute(\"style\", \"display:block !important;font-size:0 !important;height:0; color:transparent !important;  \");\n  fakaH3Tag.appendChild(atag);\n  fakaH3Tag.setAttribute(\"style\", \"display:block !important;font-size:0 !important;height:0; color:transparent !important;  \");\n  var container = document.querySelector(\"[data-html-content]\");\n  container.insertBefore(fakaH3Tag, container.querySelector(\"h3 ~ p\"));\n}\n\nfunction init() {\n  activeProductClass = document.querySelector(\"[data-active-product-classification]\");\n  listQuantities = document.querySelectorAll(\"._quantity\");\n  chkOutOfStock = document.querySelector(\"[data-out-of-stock]\");\n  txtQuantity = document.querySelector(\"[data-quantity]\");\n  attribute1Items = document.querySelectorAll('input[name=\"Attribute1Value\"]');\n  attribute2Items = document.querySelectorAll('input[name=\"Attribute2Value\"]');\n  productClassificationId = document.querySelector(\"[name=ProductClassificationId]\");\n  dataPrice = document.querySelector(\"[data-price]\");\n  dataDelPrice = document.querySelector(\"[data-del-price]\");\n  discountPercentEle = document.querySelector(\"[data-css-discount]\");\n  newestPostsContainer = document.querySelector(\"[data-selector-newest-post]\");\n  flashSaleContainer = document.querySelector(\"[data-flash-sale-detail]\");\n  dataCountEle = flashSaleContainer.querySelector(\"[data-count]\");\n  dataProcessBarEle = flashSaleContainer.querySelector(\"progress\");\n  listSections = [document.querySelector(\"[data-section='1']\"), document.querySelector(\"[data-section='2']\"), document.querySelector(\"[data-section='3']\"), document.querySelector(\"[data-section='4']\"), document.querySelector(\"[data-section='5']\"), document.querySelector(\"[data-section='6']\"), document.querySelector(\"[data-section='7']\")];\n  dataHead = document.querySelector(\"main\");\n}\n\n;\n\nfunction reloadMoneyAndQuantity() {\n  var attributeValue1 = !!document.querySelector('input[name=\"Attribute1Value\"]:checked') ? document.querySelector('input[name=\"Attribute1Value\"]:checked').value : \"\";\n  var attributeValue2 = !!document.querySelector('input[name=\"Attribute2Value\"]:checked') ? document.querySelector('input[name=\"Attribute2Value\"]:checked').value : \"\";\n  var selectedQuantityInfo = listPriceInfo.filter(function (item) {\n    return item.attribute1Value === attributeValue1 && item.attribute2Value === attributeValue2;\n  }); //TODO reload slider by productClass\n\n  activeProductClass.dataset.activeProductClassification = selectedQuantityInfo[0].productClassificationId;\n  LoadSwiperDefault();\n\n  if (isFistLoad) {\n    isFistLoad = false;\n  } else {\n    SlideToProductClass(selectedQuantityInfo[0].productClassificationId);\n  } //TODO reload slider by productClass\n\n\n  if (selectedQuantityInfo.length === 0) {\n    chkOutOfStock.checked = true;\n    return;\n  }\n\n  ;\n  history.replaceState(null, null, selectedQuantityInfo[0].url); //location.replace(selectedQuantityInfo[0].url);\n\n  var quantity = selectedQuantityInfo[0].quantity;\n  productClassificationId.value = selectedQuantityInfo[0].productClassificationId;\n  chkOutOfStock.checked = quantity <= 0;\n  txtQuantity.max = quantity;\n\n  if (+txtQuantity.value > +txtQuantity.max) {\n    txtQuantity.value = +txtQuantity.max;\n  } //\n\n\n  var selectedClassItem = listPriceInfo.filter(function (item) {\n    return item.attribute1Value === attributeValue1 && item.attribute2Value === attributeValue2;\n  })[0];\n  var quantitiesPrices = selectedClassItem.quantitiesPrice;\n  var priceUnit = quantitiesPrices[quantitiesPrices.length - 1].money;\n\n  for (var i = quantitiesPrices.length - 1; i >= 0; i--) {\n    if (quantitiesPrices[i].range !== 0 && +txtQuantity.value >= quantitiesPrices[i].range) {\n      break;\n    }\n\n    priceUnit = quantitiesPrices[i].money;\n  }\n\n  dataPrice.innerHTML = WNumbHelper.GetFrNumber(priceUnit) + \"<sup>đ</sup>\";\n  dataPrice.dataset.price = priceUnit;\n  dataPrice.style.visibility = \"visible\";\n  dataDelPrice.classList.add(\"hide\");\n\n  if (priceUnit < +dataDelPrice.dataset.delPrice) {\n    dataDelPrice.classList.remove(\"hide\");\n  }\n\n  discountPercentEle.classList.add(\"hide\");\n  var discountPercent = 100 - priceUnit * 100 / selectedClassItem.price;\n\n  if (discountPercent > 0) {\n    discountPercentEle.classList.remove(\"hide\");\n    discountPercentEle.innerText = (selectedClassItem.isFlashSale ? \"Flash Sale -\" : \"Giảm \") + Number(discountPercent).toFixed(2) + \"%\";\n  }\n\n  dataCountEle.removeAttribute(\"data-flash-deal-count-down\");\n  dataProcessBarEle.removeAttribute(\"data-is-host\");\n  flashSaleContainer.classList.add(\"hide\");\n\n  if (selectedClassItem.isFlashSale) {\n    flashSaleContainer.classList.remove(\"hide\");\n\n    if (selectedClassItem.valueQuantity <= 0) {\n      dataCountEle.dataset.flashDealCountDown = selectedClassItem.countDownTime;\n      checkTimeCountDown(\"[data-css-simple-detail]\");\n    } else {\n      dataCountEle.innerText = \"còn \" + selectedClassItem.countDownQuantity + \" sản phẩm\";\n    }\n\n    if (selectedClassItem.valueQuantity * selectedClassItem.maxHours > selectedClassItem.hours * selectedClassItem.maxValueQuantity) //valueQuantity  / maxValueQuantity > hours / maxHours\n      {\n        debugger;\n        dataProcessBarEle.setAttribute(\"data-is-hot\", \"true\");\n        dataProcessBarEle.max = selectedClassItem.maxValueQuantity;\n        dataProcessBarEle.value = selectedClassItem.valueQuantity;\n      } else {\n      dataProcessBarEle.removeAttribute(\"data-is-hot\");\n      dataProcessBarEle.max = selectedClassItem.maxHours;\n      dataProcessBarEle.value = selectedClassItem.hours;\n    }\n  } //const rowItems = document.querySelectorAll(\"[data-class-id]\");\n  //var summaryMoney = 0;\n  //for (let i = 0; i < rowItems.length;i++) {\n  //    const unitPrice = +rowItems[i].querySelector(\"[data-unit-price]\").dataset.unitPrice;\n  //    const quantity = +rowItems[i].querySelector(\"[data-quantity]\").value;\n  //    const itemPrice = rowItems[i].querySelector(\"[data-item-price]\");\n  //    const itemMoney = unitPrice * quantity;\n  //    summaryMoney += itemMoney;\n  //    itemPrice.innerHTML = WNumbHelper.GetFrNumber(itemMoney);\n  //}\n  //const summaryItem = document.querySelector(\"[data-summary]\");\n  //summaryItem.innerHTML = WNumbHelper.GetFrNumber(summaryMoney);\n\n\n  var frmAddToCart = document.querySelector(\"#frmAddToCart\");\n\n  if (!!frmAddToCart) {\n    var productId = frmAddToCart.querySelectorAll('[name=ProductClassificationId]')[1].value || frmAddToCart.querySelectorAll('[name=ProductClassificationId]')[0].value;\n    var productClassSelected = document.querySelector('[data-css-simple-detail] [type=radio]:checked');\n    var productClassName = productClassSelected != null ? productClassSelected.value : \"\";\n    var productName = document.querySelector('[name=ProductName]').value;\n    EnhancedEcommerce.AddImpression(productId, productName, productClassName);\n  }\n}\n\nfunction updateAnalytic() {\n  var frmAddToCart = document.querySelector(\"#frmAddToCart\");\n\n  if (!!frmAddToCart) {\n    var productId = frmAddToCart.querySelectorAll('[name=ProductClassificationId]')[1].value || frmAddToCart.querySelectorAll('[name=ProductClassificationId]')[0].value;\n    var productClassSelected = document.querySelector('[data-css-simple-detail] [type=radio]:checked');\n    var productClassName = productClassSelected != null ? productClassSelected.value : \"\";\n    var productName = document.querySelector('[name=ProductName]').value;\n    var price = document.querySelector('[data-css-simple-detail] [data-price]').dataset.price;\n    EnhancedEcommerce.AddProduct(productId, productName, productClassName, '', '', price);\n  }\n}\n\nfunction btnByNowClick(eve) {\n  window.location = eve.target.dataset.href;\n}\n\nfunction load360Spin() {\n  var spritespin = document.querySelector('.spritespin');\n\n  if (spritespin) {\n    if (!!spritespin.dataset.width) {\n      $('.spritespin').spritespin({\n        source: image360Sources,\n        width: Math.min(document.querySelector('#spin360').getBoundingClientRect().width, 500),\n        height: Math.min(document.querySelector('#spin360').getBoundingClientRect().width, 500),\n        // reverse interaction direction\n        sense: -1,\n        frameTime: 100,\n        responsive: false\n      });\n    } else {\n      $('.spritespin').spritespin({\n        source: image360Sources,\n        width: 500,\n        height: 500,\n        // reverse interaction direction\n        sense: -1,\n        frameTime: 100,\n        responsive: true\n      });\n    }\n  }\n}\n\nfunction ratingCompleteCallBack() {\n  console.log(\"Reload ratings\");\n  document.querySelector(\"#ratingSection details\").removeAttribute(\"open\");\n}\n\nfunction loadJqueryZoom() {\n  var isDesktop = document.querySelector(\"[data-device=Desktop]\");\n\n  if (!!isDesktop) {\n    var imageThumnails = document.querySelectorAll('[data-zoom]');\n\n    for (var i = 0; i < imageThumnails.length; i++) {\n      new Drift(imageThumnails[i], {\n        paneContainer: document.querySelector(\"[data-css-simple-detail]\")\n      });\n    }\n  }\n}"]}