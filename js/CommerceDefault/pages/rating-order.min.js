"use strict";var listQuantities,chkOutOfStock,txtQuantity,attribute1Items,attribute2Items,productClassificationId,dataPrice,newestPostsContainer,activeProductClass,subscribeButton,discountPercentEle,flashSaleContainer,dataCountEle,dataProcessBarEle,dataDelPrice,listSections,dataHead,isFistLoad=!0,didScroll=!1,isClick=!1;function innitFileUpload(){var e=document.getElementById("inputRatingFormFile"),t=e.dataset.curentPathFiles&&""!==e.dataset.curentPathFiles?[e.dataset.curentPathFiles]:null,a=e.dataset.curentShowingImages&&""!==e.dataset.curentShowingImages?[e.dataset.curentShowingImages]:null,i=e.dataset.maxFile&&""!==e.dataset.maxFile?+e.dataset.maxFile:3,n=e.dataset.maxFile&&""!==e.dataset.maxSize?+e.dataset.maxSize:5;(new FileUpload).Init(null,t,a,"#inputRatingFormFile","#newReviewContainer","#newReviewContainer","#frmProductRating",i,console.log("change"),!0,"RatingFormFile",n)}function clearform(){$("#frmProductRating")[0].reset();var e=document.getElementById("newReviewContainer");e&&(e.innerHTML="")}function loadScrollNav(){for(var e=document.querySelectorAll("[data-nav-product-detail] button"),t=0;t<e.length;t++)e[t].addEventListener("click",function(e){Site.ScrollToElement("[data-section='"+e.currentTarget.dataset.target+"']")})}function processFancybox(){}function processAnonymousUser(){for(var e=document.querySelectorAll("._id-listRatings canvas"),t=0;t<e.length;t++){var a=e[t],i=a.dataset.userName.split(" "),n=2<i.length?i[0].charAt(0).toUpperCase()+i[1].charAt(0).toUpperCase():i[0].charAt(0).toUpperCase(),o=a.getContext("2d"),r=a.width,l=a.height;window.devicePixelRatio&&(a.setAttribute("width",r*window.devicePixelRatio),a.setAttribute("height",l*window.devicePixelRatio),a.style.width=r+"px",a.style.height=l+"px",o.scale(window.devicePixelRatio,window.devicePixelRatio)),o.fillStyle=stringToHslColor(n,30,80),o.fillRect(0,0,a.width,a.height),o.font=l/2+"px Arial",o.textAlign="center",o.fillStyle="#FFF",o.fillText(n,r/2,l/1.5)}}function stringToHslColor(e,t,a){for(var i=0,n=0;n<e.length;n++)i=e.charCodeAt(n)+((i<<5)-i);return"hsl("+i%360+", "+t+"%, "+a+"%)"}document.addEventListener("DOMContentLoaded",function(){var e;for(init(),Site.LockOnsCroll=!1,e=0;e<listQuantities.length;e++){(new Quantity).Init(listQuantities[e],reloadMoneyAndQuantity)}for(e=0;e<attribute1Items.length;e++)attribute1Items[e].addEventListener("change",reloadMoneyAndQuantity);for(e=0;e<attribute2Items.length;e++)attribute2Items[e].addEventListener("change",reloadMoneyAndQuantity);reloadMoneyAndQuantity(),loadJqueryZoom();try{JsBarcode("._barcode").init()}catch(e){console.log(e)}load360Spin(),atiCopyRight(),PushNotifications.initialize(),submitProductWidgetAction("[data-related-products]"),loadScrollNav(),LocalStorageHelper.LogCategory(productCategoryId,!0,!1,!1,!1);var t=document.querySelector("[data-first-thumnail]").dataset.firstThumnail;LocalStorageHelper.LogProductClassIdView(activeProductClass.dataset.activeProductClassification,document.querySelector("[name=ProductName]").value,t,document.querySelector("link[rel='canonical']").href),processAnonymousUser(),innitFileUpload(),document.getElementById("btnReloadRatings").click()});var zDockInterval=setInterval(function(){for(var e=1,t=0;t<listSections.length;t++)listSections[t]&&listSections[t].getBoundingClientRect().y<5&&(e=listSections[t].dataset.section);dataHead.dataset.sessionActive=e},100);function loadFlashSaleSwiper(){Site.bLazy.load(document.querySelectorAll(".swiper-flashsale-container img",!0),!1);var e=document.querySelector("[data-device=Mobile]"),t=document.querySelector("[data-device=Desktop]"),a=4;e?a=2:t||(a=3);new Swiper(".swiper-flashsale-container",{slidesPerView:a,spaceBetween:-1,slidesPerGroup:a,loop:!1,loopFillGroupWithBlank:!0,lazy:{loadPrevNext:!0},preloadImages:!1,autoplay:{delay:4e3,disableOnInteraction:!1},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}})}function atiCopyRight(){var e=document.querySelector("[itemprop='itemListElement']:last-child"),t=e.innerText,a=e.querySelector("[content]").attributes.content.value,i=document.createElement("h3");i.classList="d-none";var n=document.createElement("a");n.innerText="Nguồn: "+t+" tại "+window.location.hostname,n.href=a,n.alt="Chi tiết sản phẩm "+t+" tại "+window.location.hostname+". ",n.classList="_atyc",n.setAttribute("style","display:block !important;font-size:0 !important;height:0; color:transparent !important;  "),i.appendChild(n),i.setAttribute("style","display:block !important;font-size:0 !important;height:0; color:transparent !important;  ");var o=document.querySelector("[data-html-content]");o.insertBefore(i,o.querySelector("h3 ~ p"))}function init(){activeProductClass=document.querySelector("[data-active-product-classification]"),listQuantities=document.querySelectorAll("._quantity"),chkOutOfStock=document.querySelector("[data-out-of-stock]"),txtQuantity=document.querySelector("[data-quantity]"),attribute1Items=document.querySelectorAll('input[name="Attribute1Value"]'),attribute2Items=document.querySelectorAll('input[name="Attribute2Value"]'),productClassificationId=document.querySelector("[name=ProductClassificationId]"),dataPrice=document.querySelector("[data-price]"),dataDelPrice=document.querySelector("[data-del-price]"),discountPercentEle=document.querySelector("[data-css-discount]"),newestPostsContainer=document.querySelector("[data-selector-newest-post]"),flashSaleContainer=document.querySelector("[data-flash-sale-detail]"),dataCountEle=flashSaleContainer.querySelector("[data-count]"),dataProcessBarEle=flashSaleContainer.querySelector("progress"),listSections=[document.querySelector("[data-section='1']"),document.querySelector("[data-section='2']"),document.querySelector("[data-section='3']"),document.querySelector("[data-section='4']"),document.querySelector("[data-section='5']"),document.querySelector("[data-section='6']"),document.querySelector("[data-section='7']")],dataHead=document.querySelector("main")}function reloadMoneyAndQuantity(){var t=document.querySelector('input[name="Attribute1Value"]:checked')?document.querySelector('input[name="Attribute1Value"]:checked').value:"",a=document.querySelector('input[name="Attribute2Value"]:checked')?document.querySelector('input[name="Attribute2Value"]:checked').value:"",e=listPriceInfo.filter(function(e){return e.attribute1Value===t&&e.attribute2Value===a});if(activeProductClass.dataset.activeProductClassification=e[0].productClassificationId,LoadSwiperDefault(),isFistLoad?isFistLoad=!1:SlideToProductClass(e[0].productClassificationId),0!==e.length){history.replaceState(null,null,e[0].url);var i=e[0].quantity;productClassificationId.value=e[0].productClassificationId,chkOutOfStock.checked=i<=0,txtQuantity.max=i,+txtQuantity.value>+txtQuantity.max&&(txtQuantity.value=+txtQuantity.max);for(var n=listPriceInfo.filter(function(e){return e.attribute1Value===t&&e.attribute2Value===a})[0],o=n.quantitiesPrice,r=o[o.length-1].money,l=o.length-1;0<=l&&!(0!==o[l].range&&+txtQuantity.value>=o[l].range);l--)r=o[l].money;dataPrice.innerHTML=WNumbHelper.GetFrNumber(r)+"<sup>đ</sup>",dataPrice.dataset.price=r,dataPrice.style.visibility="visible",dataDelPrice.classList.add("hide"),r<+dataDelPrice.dataset.delPrice&&dataDelPrice.classList.remove("hide"),discountPercentEle.classList.add("hide");var c=100-100*r/n.price;0<c&&(discountPercentEle.classList.remove("hide"),discountPercentEle.innerText=(n.isFlashSale?"Flash Sale -":"Giảm ")+Number(c).toFixed(2)+"%"),dataCountEle.removeAttribute("data-flash-deal-count-down"),dataProcessBarEle.removeAttribute("data-is-host"),flashSaleContainer.classList.add("hide"),n.isFlashSale&&(flashSaleContainer.classList.remove("hide"),n.valueQuantity<=0?(dataCountEle.dataset.flashDealCountDown=n.countDownTime,checkTimeCountDown("[data-css-simple-detail]")):dataCountEle.innerText="còn "+n.countDownQuantity+" sản phẩm",n.valueQuantity*n.maxHours>n.hours*n.maxValueQuantity?(dataProcessBarEle.setAttribute("data-is-hot","true"),dataProcessBarEle.max=n.maxValueQuantity,dataProcessBarEle.value=n.valueQuantity):(dataProcessBarEle.removeAttribute("data-is-hot"),dataProcessBarEle.max=n.maxHours,dataProcessBarEle.value=n.hours));var s=document.querySelector("#frmAddToCart");if(s){var u=s.querySelectorAll("[name=ProductClassificationId]")[1].value||s.querySelectorAll("[name=ProductClassificationId]")[0].value,d=document.querySelector("[data-css-simple-detail] [type=radio]:checked"),m=null!=d?d.value:"",y=document.querySelector("[name=ProductName]").value;EnhancedEcommerce.AddImpression(u,y,m)}}else chkOutOfStock.checked=!0}function updateAnalytic(){var e=document.querySelector("#frmAddToCart");if(e){var t=e.querySelectorAll("[name=ProductClassificationId]")[1].value||e.querySelectorAll("[name=ProductClassificationId]")[0].value,a=document.querySelector("[data-css-simple-detail] [type=radio]:checked"),i=null!=a?a.value:"",n=document.querySelector("[name=ProductName]").value,o=document.querySelector("[data-css-simple-detail] [data-price]").dataset.price;EnhancedEcommerce.AddProduct(t,n,i,"","",o)}}function btnByNowClick(e){window.location=e.target.dataset.href}function load360Spin(){var e=document.querySelector(".spritespin");e&&(e.dataset.width?$(".spritespin").spritespin({source:image360Sources,width:Math.min(document.querySelector("#spin360").getBoundingClientRect().width,500),height:Math.min(document.querySelector("#spin360").getBoundingClientRect().width,500),sense:-1,frameTime:100,responsive:!1}):$(".spritespin").spritespin({source:image360Sources,width:500,height:500,sense:-1,frameTime:100,responsive:!0}))}function ratingCompleteCallBack(){console.log("Reload ratings"),document.querySelector("#ratingSection details").removeAttribute("open")}function loadJqueryZoom(){if(document.querySelector("[data-device=Desktop]"))for(var e=document.querySelectorAll("[data-zoom]"),t=0;t<e.length;t++)new Drift(e[t],{paneContainer:document.querySelector("[data-css-simple-detail]")})}
//# sourceMappingURL=product-detail.min.js.map
