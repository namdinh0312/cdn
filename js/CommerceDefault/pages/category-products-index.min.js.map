{"version":3,"sources":["wwwroot/js/CommerceDefault/pages/category-products-index.js"],"names":["listQuantities","chkOutOfStock","txtQuantity","attribute1Items","attribute2Items","productClassificationId","dataPrice","newestPostsContainer","btnReloadListProductByClassification","btnReloadListProductLazy","inputClassificationForms","inputProductAttributeForms","activeCategoryAttributes","curentPageClassification","curentPageProductAttribute","pageSizeFields","lockScrollNexProduct","loadProductWidget","reloadNextProduct","Pagination","page","size","formName","value","nextPage","console","log","formElement","document","getElementById","formData","FormData","append","AjaxRequest","SendFormData","action","response","status","flexContainer","querySelector","productWidgets","Site","HtmlToElement","i","length","appendChild","bLazy","revalidate","setTimeout","Next","initBrand","chkSortBys","querySelectorAll","addEventListener","eve","ClosePopup","target","checked","click","init","initNoUiSlider","forEach","el","htmlinsert","createElement","realmininput","realmaxinput","style","display","min","getAttribute","max","noUiSlider","create","start","connect","step","tooltips","WNumbHelper","longNumberFormatShort","range","Number","on","values","String","dispatchEvent","CreateEvent","innitCheckboxFilter","loadDefaultValuesGroup2","_i","loadDefaultValuesGroup1","reset","reloadListProductComplete","Run","submitProductWidgetAction","pagingBtns","dataset","pageSizes","j","pageSize","TabPages","Init","BindingOnCroll","IsDesktopBackend","loadSuggestProducts"],"mappings":"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","file":"category-products-index.min.js","sourcesContent":["\"use strict\";\n\nvar listQuantities, chkOutOfStock, txtQuantity, attribute1Items, attribute2Items, productClassificationId, dataPrice, newestPostsContainer;\nvar btnReloadListProductByClassification, btnReloadListProductLazy, inputClassificationForms, inputProductAttributeForms;\nvar activeCategoryAttributes, curentPageClassification, curentPageProductAttribute, pageSizeFields;\nvar lockScrollNexProduct = false;\ndocument.addEventListener(\"DOMContentLoaded\", function () {\n  init();\n\n  if (!!document.querySelector(\"#frmLoadComplexCategoryProductByClassification [data-active-tab-number]\")) {\n    var tab1s = new TabPages();\n    tab1s.Init(\"#frmLoadComplexCategoryProductByClassification [data-active-tab-number]\");\n  }\n\n  if (!!document.querySelector(\"#frmLoadComplexCategoryProductByCategoryAttributes [data-active-tab-number]\")) {\n    var tab2s = new TabPages();\n    tab2s.Init(\"#frmLoadComplexCategoryProductByCategoryAttributes [data-active-tab-number]\");\n  }\n\n  Site.BindingOnCroll();\n  innitCheckboxFilter(Site.IsDesktopBackend());\n\n  if (!Site.IsDesktopBackend()) {\n    var btnFillter = document.getElementById(\"btnMobileSubmitFake\");\n    btnFillter.addEventListener(\"click\", function () {\n      if (!!activeCategoryAttributes) {\n        btnReloadListProductLazy.click();\n        activeCategoryAttributes = true;\n      } else {\n        btnReloadListProductByClassification.click();\n        activeCategoryAttributes = false;\n      }\n\n      Site.ClosePopup();\n    });\n  }\n\n  initNoUiSlider();\n  reloadListProductComplete(); //for brand only\n\n  initBrand();\n  loadSuggestProducts();\n});\n\nfunction loadProductWidget() {\n  debugger;\n}\n\nfunction reloadNextProduct() {\n  if (!Pagination.page || lockScrollNexProduct || Pagination.page >= Pagination.size) {\n    return;\n  }\n\n  lockScrollNexProduct = true;\n  var formName;\n\n  if (!!activeCategoryAttributes) {\n    formName = \"frmLoadComplexCategoryProductByCategoryAttributes\";\n    curentPageProductAttribute.value = Pagination.page + 1;\n  } else {\n    formName = \"frmLoadComplexCategoryProductByClassification\";\n    curentPageClassification.value = Pagination.page + 1;\n  }\n\n  var nextPage = Pagination.page + 1;\n  console.log(nextPage);\n  var formElement = document.getElementById(formName);\n  var formData = new FormData(formElement);\n  formData.append(\"productWigetOnly\", \"True\");\n  AjaxRequest.SendFormData(\"POST\", formElement.action, formData, function (response, status) {\n    var flexContainer = document.querySelector(\"._flex-container\");\n    var productWidgets = Site.HtmlToElement(response);\n\n    for (var i = 0; i < productWidgets.length; i++) {\n      flexContainer.appendChild(productWidgets[i]);\n    }\n\n    Site.bLazy.revalidate();\n    setTimeout(function () {\n      lockScrollNexProduct = false;\n      Pagination.Next();\n    }, 1000);\n  }, function () {\n    setTimeout(function () {\n      lockScrollNexProduct = false;\n    }, 1000);\n  });\n}\n\nfunction initBrand() {\n  var brandHeader = document.querySelector(\"[data-brand]\");\n\n  if (!!brandHeader) {//var backgroundImage = \"url(\"+ brandHeader.dataset.backgroundImage+\")\";\n    //var dataHead = document.querySelector(\"[data-head]\");\n    //dataHead.style.backgroundImage = backgroundImage;\n    //var dataBlackGround = document.querySelector(\"[data-main-section] [data-black-row]\");\n    //dataBlackGround.style.backgroundImage = backgroundImage;\n    //var body = document.querySelector(\"body\");\n    //body.setAttribute(\"data-brand-page\",\"\");\n  }\n\n  var chkSortBys = document.querySelectorAll(\"[name=sortBy]\");\n\n  for (var i = 0; i < chkSortBys.length; i++) {\n    chkSortBys[i].addEventListener(\"change\", function (eve) {\n      Site.ClosePopup();\n\n      if (eve.target.checked) {\n        if (!!activeCategoryAttributes) {\n          var sortbyElement = document.querySelector(\"#frmLoadComplexCategoryProductByCategoryAttributes [name=ProductSortbyEnum]\");\n          sortbyElement.value = eve.target.value;\n          var curentPage = document.querySelector(\"#frmLoadComplexCategoryProductByCategoryAttributes [name=CurentPage]\");\n          curentPage.value = 0;\n          activeCategoryAttributes = true;\n          btnReloadListProductLazy.click();\n        } else {\n          var _sortbyElement = document.querySelector(\"#frmLoadComplexCategoryProductByCategoryAttributes [name=ProductSortbyEnum]\");\n\n          _sortbyElement.value = eve.target.value;\n\n          var _curentPage = document.querySelector(\"#frmLoadComplexCategoryProductByClassification [name=CurentPage]\");\n\n          _curentPage.value = 0;\n          activeCategoryAttributes = false;\n          btnReloadListProductByClassification.click();\n        }\n      }\n    });\n  }\n}\n\nfunction init() {\n  activeCategoryAttributes = true;\n  btnReloadListProductByClassification = document.getElementById(\"btnReloadListProductByClassification\");\n  btnReloadListProductLazy = document.getElementById(\"btnReloadListProductLazy\");\n  inputClassificationForms = document.querySelectorAll(\"#frmLoadComplexCategoryProductByClassification [name^=AttributeModels]\");\n  inputProductAttributeForms = document.querySelectorAll(\"#frmLoadComplexCategoryProductByCategoryAttributes [name^=AttributeModels]\");\n  pageSizeFields = document.querySelectorAll(\"[name=PageSize]\");\n  curentPageClassification = document.querySelector(\"#frmLoadComplexCategoryProductByClassification [name=CurentPage]\");\n  curentPageProductAttribute = document.querySelector(\"#frmLoadComplexCategoryProductByCategoryAttributes [name=CurentPage]\");\n}\n\nfunction initNoUiSlider() {\n  document.querySelectorAll('._id-nouirange').forEach(function (el) {\n    var htmlinsert = document.createElement('div');\n    var realmininput = el.querySelector('._id-min');\n    var realmaxinput = el.querySelector('._id-max');\n    realmininput.style.display = \"none \";\n    realmaxinput.style.display = \"none \";\n    var min = realmininput.getAttribute('min');\n    var max = realmaxinput.getAttribute('max');\n    el.appendChild(htmlinsert);\n    el.noUiSlider = noUiSlider.create(htmlinsert, {\n      start: [realmininput.value, realmaxinput.value],\n      connect: true,\n      step: 1,\n      tooltips: [WNumbHelper.longNumberFormatShort, WNumbHelper.longNumberFormatShort],\n      range: {\n        'min': Number(min),\n        'max': Number(max)\n      }\n    });\n    htmlinsert.noUiSlider.on('change', function (values) {\n      var rangevals = values;\n      realmininput.value = String(values[0]);\n      realmaxinput.value = String(values[1]);\n      realmininput.dispatchEvent(new Site.CreateEvent(\"change\"));\n    });\n  });\n}\n\nfunction innitCheckboxFilter() {\n  for (var i = 0; i < inputClassificationForms.length; i++) {\n    inputClassificationForms[i].addEventListener(\"change\", function (eve) {\n      loadDefaultValuesGroup2();\n      var curentPage = document.querySelector(\"#frmLoadComplexCategoryProductByClassification [name=CurentPage]\");\n      curentPage.value = 0;\n      btnReloadListProductByClassification.click();\n      activeCategoryAttributes = false;\n      console.log(\"Group 1 change\");\n    });\n  }\n\n  for (var _i = 0; _i < inputProductAttributeForms.length; _i++) {\n    inputProductAttributeForms[_i].addEventListener(\"change\", function (eve) {\n      loadDefaultValuesGroup1();\n      var curentPage = document.querySelector(\"#frmLoadComplexCategoryProductByCategoryAttributes [name=CurentPage]\");\n      curentPage.value = 0;\n      btnReloadListProductLazy.click();\n      activeCategoryAttributes = true;\n      console.log(\"Group 2 change\");\n    });\n  }\n}\n\nfunction loadDefaultValuesGroup2() {\n  document.querySelectorAll('#frmLoadComplexCategoryProductByCategoryAttributes input[type=checkbox]').forEach(function (el) {\n    el.checked = false;\n  });\n  document.querySelectorAll('#frmLoadComplexCategoryProductByCategoryAttributes ._id-nouirange').forEach(function (el) {\n    el.noUiSlider.reset();\n  });\n}\n\nfunction loadDefaultValuesGroup1() {\n  document.querySelectorAll('#frmLoadComplexCategoryProductByClassification input[type=checkbox]').forEach(function (el) {\n    el.checked = false;\n  });\n  document.querySelectorAll('#frmLoadComplexCategoryProductByClassification ._id-nouirange').forEach(function (el) {\n    el.noUiSlider.reset();\n  });\n}\n\nfunction reloadListProductComplete() {\n  Pagination.Run();\n  submitProductWidgetAction(\"._id-listProductPagings\");\n  var pagingBtns = document.querySelectorAll(\"#pagination button\");\n\n  for (var i = 0; i < pagingBtns.length; i++) {\n    pagingBtns[i].addEventListener(\"click\", function (eve) {\n      if (!!activeCategoryAttributes) {\n        curentPageProductAttribute.value = eve.target.dataset.value;\n        btnReloadListProductLazy.click();\n        activeCategoryAttributes = true;\n      } else {\n        curentPageClassification.value = eve.target.dataset.value;\n        btnReloadListProductByClassification.click();\n        activeCategoryAttributes = false;\n      }\n    });\n  }\n\n  var pageSizes = document.querySelectorAll(\"[data-page-size]\");\n\n  for (var i = 0; i < pageSizes.length; i++) {\n    pageSizes[i].addEventListener(\"click\", function (eve) {\n      for (var j = 0; j < pageSizeFields.length; j++) {\n        pageSizeFields[j].value = eve.target.dataset.pageSize;\n      }\n\n      if (!!activeCategoryAttributes) {\n        var curentPage = document.querySelector(\"#frmLoadComplexCategoryProductByCategoryAttributes [name=CurentPage]\");\n        curentPage.value = 0;\n        activeCategoryAttributes = true;\n        btnReloadListProductLazy.click();\n      } else {\n        activeCategoryAttributes = false;\n\n        var _curentPage2 = document.querySelector(\"#frmLoadComplexCategoryProductByClassification [name=CurentPage]\");\n\n        _curentPage2.value = 0;\n        btnReloadListProductByClassification.click();\n      }\n    });\n  }\n}"]}