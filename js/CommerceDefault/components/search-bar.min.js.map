{"version":3,"sources":["wwwroot/js/CommerceDefault/components/search-bar.js"],"names":["btnSearchProductName","frmHearderSearch","shopingcartElement","chkShowHideSearchForm","initSearchBar","document","getElementById","$","autocomplete","appendTo","serviceUrl","deferRequestBy","minChars","noCache","onSelect","suggestion","showNoSuggestionNotice","noSuggestionNotice","formatResult","currentValue","data","url","image","value","lookupFilter","originalQuery","queryLowerCase","RegExp","Autocomplete","utils","escapeRegExChars","test","onSearchStart","query","Site","AddClassElement","onSearchComplete","suggestions","RemoveClassElement","onHide","container","addEventListener","scrollPos","updateZDocActive","querySelector","headerElement","searchContainer","classList","add","documentElement","scrollTop","body","remove","offsetHeight","getBoundingClientRect","top","IsDesktopBackend","contains","window","onscroll","e","LockOnsCroll"],"mappings":"AAAA,aAEA,IAAIA,qBAAsBC,iBACtBC,mBAAoBC,sBAMxB,SAASC,gBACPJ,qBAAuBK,SAASC,eAAe,wBAC/CL,iBAAmBI,SAASC,eAAe,oBAC3CC,EAAE,iBAAiBC,aAAa,CAC9BC,SAAU,wBACVC,WAAY,qCAEZC,eAAgB,IAChBC,SAAU,EACVC,SAAS,EACTC,SAAU,SAAkBC,KAC5BC,wBAAwB,EACxBC,mBAAoB,0BACpBC,aAAc,SAAsBH,EAAYI,GAC9C,MAAO,YAAcJ,EAAWK,KAAKC,IAAM,4EAA8EN,EAAWK,KAAKE,MAAQ,oCAAsCP,EAAWQ,MAAQ,cAE5MC,aAAc,SAAsBT,EAAYU,EAAeC,GAE7D,OADS,IAAIC,OAAO,MAAQpB,EAAEqB,aAAaC,MAAMC,iBAAiBJ,GAAiB,MACzEK,KAAKhB,EAAWQ,QAE5BS,cAAe,SAAuBC,GACpCC,KAAKC,gBAAgBnC,qBAAsB,WAE7CoC,iBAAkB,SAA0BH,EAAOI,GACjDH,KAAKI,mBAAmBtC,qBAAsB,UAC9CkC,KAAKC,gBAAgBlC,iBAAkB,eAEzCsC,OAAQ,SAAgBC,GACtBN,KAAKI,mBAAmBrC,iBAAkB,iBAjChDI,SAASoC,iBAAiB,mBAAoB,WAC5CrC,gBACAD,sBAAwBE,SAASC,eAAe,2BAoClD,IAAIoC,UAAY,EAQhB,SAASC,mBACPzC,mBAAqBG,SAASuC,cAAc,iCAC5C,IAAIC,EAAgBxC,SAASuC,cAAc,eACvCE,EAAkBzC,SAASuC,cAAc,6BAc7C,GAZME,GACJA,EAAgBC,UAAUC,IAAI,QAG5B3C,SAAS4C,gBAAgBC,UAAY7C,SAAS8C,KAAKD,YAAc,GACnEL,EAAcE,UAAUC,IAAI,qBAC5B9C,mBAAmB6C,UAAUC,IAAI,uBAEjCH,EAAcE,UAAUK,OAAO,qBAC/BlD,mBAAmB6C,UAAUK,OAAO,sBAGlC/C,SAAS8C,KAAKD,UAAYL,EAAcQ,aAAe,KAAOhD,SAAS4C,gBAAgBC,UAAYL,EAAcQ,aAAe,KAGlI,GAFAR,EAAcE,UAAUC,IAAI,eAExB3C,SAAS8C,KAAKG,wBAAwBC,IAAMb,UAC9CG,EAAcE,UAAUK,OAAO,aAC1B,GAAIlB,KAAKsB,qBAAuBnD,SAAS8C,KAAKJ,UAAUU,SAAS,eAAgB,CACpEpD,SAASuC,cAAc,gBAGvCC,EAAcE,UAAUC,IAAI,cAIhCH,EAAcE,UAAUK,OAAO,eAC/BP,EAAcE,UAAUK,OAAO,QAKjCV,UAAYrC,SAAS8C,KAAKG,wBAAwBC,IA1CpDG,OAAOC,SAAW,SAAUC,GACrB1B,KAAK2B,cACRlB","file":"search-bar.min.js","sourcesContent":["\"use strict\";\n\nvar btnSearchProductName, frmHearderSearch;\nvar shopingcartElement, chkShowHideSearchForm;\ndocument.addEventListener(\"DOMContentLoaded\", function () {\n  initSearchBar();\n  chkShowHideSearchForm = document.getElementById(\"chkShowHideSearchForm\");\n});\n\nfunction initSearchBar() {\n  btnSearchProductName = document.getElementById(\"btnSearchProductName\");\n  frmHearderSearch = document.getElementById(\"frmHearderSearch\");\n  $('#autocomplete').autocomplete({\n    appendTo: \"#suggestListContainer\",\n    serviceUrl: '/product/searchproductautocomplete',\n    //lookup: theData,\n    deferRequestBy: 250,\n    minChars: 3,\n    noCache: true,\n    onSelect: function onSelect(suggestion) {},\n    showNoSuggestionNotice: true,\n    noSuggestionNotice: 'Không tìm thấy sản phẩm',\n    formatResult: function formatResult(suggestion, currentValue) {\n      return \"<a href='\" + suggestion.data.url + \"'><div class='inline-block _image-wrap'><img width='40' height='40' src='\" + suggestion.data.image + \"' /></div><div data-product-name>\" + suggestion.value + \"</div></a>\";\n    },\n    lookupFilter: function lookupFilter(suggestion, originalQuery, queryLowerCase) {\n      var re = new RegExp('\\\\b' + $.Autocomplete.utils.escapeRegExChars(queryLowerCase), 'gi');\n      return re.test(suggestion.value);\n    },\n    onSearchStart: function onSearchStart(query) {\n      Site.AddClassElement(btnSearchProductName, \"active\");\n    },\n    onSearchComplete: function onSearchComplete(query, suggestions) {\n      Site.RemoveClassElement(btnSearchProductName, \"active\");\n      Site.AddClassElement(frmHearderSearch, \"showResult\");\n    },\n    onHide: function onHide(container) {\n      Site.RemoveClassElement(frmHearderSearch, \"showResult\");\n    }\n  });\n}\n\nvar scrollPos = 0;\n\nwindow.onscroll = function (e) {\n  if (!Site.LockOnsCroll) {\n    updateZDocActive();\n  }\n};\n\nfunction updateZDocActive() {\n  shopingcartElement = document.querySelector(\"[data-container-shoping-cart]\");\n  var headerElement = document.querySelector(\"[data-head]\");\n  var searchContainer = document.querySelector(\"[data-search-container-1]\");\n\n  if (!!searchContainer) {\n    searchContainer.classList.add(\"hide\");\n  }\n\n  if (document.documentElement.scrollTop + document.body.scrollTop === 0) {\n    headerElement.classList.add(\"_showNavigatorBar\");\n    shopingcartElement.classList.add(\"_showNavigatorBar\");\n  } else {\n    headerElement.classList.remove(\"_showNavigatorBar\");\n    shopingcartElement.classList.remove(\"_showNavigatorBar\");\n  }\n\n  if (document.body.scrollTop > headerElement.offsetHeight + 750 || document.documentElement.scrollTop > headerElement.offsetHeight + 750) {\n    headerElement.classList.add(\"_zDocActive\");\n\n    if (document.body.getBoundingClientRect().top > scrollPos) {\n      headerElement.classList.remove(\"hide\"); //up\n    } else if (Site.IsDesktopBackend() || !document.body.classList.contains(\"_model-show\")) {\n      var inputForcus = document.querySelector(\"input:focus\");\n\n      if (!inputForcus) {\n        headerElement.classList.add(\"hide\");\n      }\n    }\n  } else {\n    headerElement.classList.remove(\"_zDocActive\");\n    headerElement.classList.remove(\"hide\"); //down\n    //headerElement.querySelector(\"[data-search-container]\").classList.remove(\"hide\");\n  } // saves the new position for iteration.\n\n\n  scrollPos = document.body.getBoundingClientRect().top;\n}"]}