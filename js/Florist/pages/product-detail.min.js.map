{"version":3,"sources":["wwwroot/js/Florist/pages/product-detail.js"],"names":["listQuantities","chkOutOfStock","txtQuantity","attribute1Items","attribute2Items","productClassificationId","dataPrice","newestPostsContainer","activeProductClass","subscribeButton","discountPercentEle","flashSaleContainer","dataCountEle","dataProcessBarEle","dataDelPrice","listSections","dataHead","isFistLoad","didScroll","isClick","submitProductWidgetAction","innitFileUpload","imputDocumentFile","document","getElementById","curentImageContactFilePath","dataset","curentPathFiles","curentImageContactBackgroundUrl","curentShowingImages","dataMaxFile","maxFile","dataMaxSize","maxSize","FileUpload","Init","console","log","clearform","$","reset","imageReverContainer","innerHTML","loadScrollNav","btnNavs","querySelectorAll","i","length","addEventListener","eve","Site","ScrollToElement","currentTarget","target","processFancybox","processAnonymousUser","canvases","canvas","nameSplit","userName","split","initials","charAt","toUpperCase","context","getContext","canvasCssWidth","width","canvasCssHeight","height","window","devicePixelRatio","setAttribute","style","scale","fillStyle","stringToHslColor","fillRect","font","textAlign","fillText","str","s","l","hash","charCodeAt","init","LockOnsCroll","Quantity","reloadMoneyAndQuantity","loadJqueryZoom","JsBarcode","e","load360Spin","atiCopyRight","PushNotifications","initialize","LocalStorageHelper","LogCategory","productCategoryId","thumnailSrc","querySelector","firstThumnail","LogProductClassIdView","activeProductId","value","href","click","zDockInterval","setInterval","sectionActive","getBoundingClientRect","y","section","sessionActive","loadFlashSaleSwiper","bLazy","load","isMobile","isDesktop","slidesPerView","Swiper","spaceBetween","loop","lazy","loadPrevNext","preloadImages","navigation","nextEl","prevEl","itemListElement","text","innerText","url","attributes","fakaH3Tag","createElement","classList","atag","location","hostname","alt","appendChild","container","insertBefore","attributeValue1","attributeValue2","selectedQuantityInfo","listPriceInfo","filter","item","attribute1Value","attribute2Value","activeProductClassification","SlideToProductClass","history","replaceState","quantity","checked","max","selectedClassItem","quantitiesPrices","quantitiesPrice","priceUnit","money","range","WNumbHelper","GetFrNumber","price","visibility","add","delPrice","remove","discountPercent","isFlashSale","Number","toFixed","removeAttribute","valueQuantity","flashDealCountDown","countDownTime","checkTimeCountDown","countDownQuantity","maxHours","hours","maxValueQuantity","frmAddToCart","productId","productClassSelected","productClassName","productName","EnhancedEcommerce","AddImpression","updateAnalytic","AddProduct","btnByNowClick","spritespin","source","image360Sources","Math","min","sense","frameTime","responsive","ratingCompleteCallBack","imageThumnails","Drift","paneContainer"],"mappings":"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","file":"product-detail.min.js","sourcesContent":["\"use strict\";\n\nvar listQuantities, chkOutOfStock, txtQuantity, attribute1Items, attribute2Items, productClassificationId, dataPrice, newestPostsContainer;\nvar activeProductClass;\nvar subscribeButton, discountPercentEle;\nvar flashSaleContainer, dataCountEle, dataProcessBarEle, dataDelPrice;\nvar isFistLoad = true;\nvar didScroll = false,\n    listSections,\n    dataHead,\n    isClick = false;\ndocument.addEventListener(\"DOMContentLoaded\", function () {\n  init();\n  Site.LockOnsCroll = false;\n  var i;\n\n  for (i = 0; i < listQuantities.length; i++) {\n    var quantity = new Quantity();\n    quantity.Init(listQuantities[i], reloadMoneyAndQuantity);\n  }\n\n  for (i = 0; i < attribute1Items.length; i++) {\n    attribute1Items[i].addEventListener(\"change\", reloadMoneyAndQuantity);\n  }\n\n  for (i = 0; i < attribute2Items.length; i++) {\n    attribute2Items[i].addEventListener(\"change\", reloadMoneyAndQuantity);\n  }\n\n  reloadMoneyAndQuantity();\n  loadJqueryZoom();\n\n  try {\n    JsBarcode(\"._barcode\").init();\n  } catch (e) {\n    console.log(e);\n  }\n\n  load360Spin();\n  atiCopyRight(); //subscribeButton = document.getElementById('btnSubscribe');\n  //if (!!subscribeButton) {\n  //    subscribeButton.addEventListener('click',\n  //        function () {\n  //            PushNotifications.subscribeForPushNotifications(subscribeCallBack);\n  //        });\n  //}\n\n  PushNotifications.initialize();\n  loadScrollNav();\n  LocalStorageHelper.LogCategory(productCategoryId, true, false, false, false);\n  var thumnailSrc = document.querySelector(\"[data-first-thumnail]\").dataset.firstThumnail;\n  LocalStorageHelper.LogProductClassIdView(activeProductClass.dataset.activeProductId, document.querySelector('[name=ProductName]').value, thumnailSrc, document.querySelector(\"link[rel='canonical']\").href);\n  processAnonymousUser();\n  innitFileUpload();\n  document.getElementById(\"btnReloadRatings\").click();\n});\n\nfunction submitProductWidgetAction() {}\n\nfunction innitFileUpload() {\n  //----------------\n  //----------------\n  var imputDocumentFile = document.getElementById(\"inputRatingFormFile\");\n  var curentImageContactFilePath = !!imputDocumentFile.dataset.curentPathFiles && imputDocumentFile.dataset.curentPathFiles !== \"\" ? [imputDocumentFile.dataset.curentPathFiles] : null;\n  var curentImageContactBackgroundUrl = !!imputDocumentFile.dataset.curentShowingImages && imputDocumentFile.dataset.curentShowingImages !== \"\" ? [imputDocumentFile.dataset.curentShowingImages] : null; //\n\n  var dataMaxFile = !!imputDocumentFile.dataset.maxFile && imputDocumentFile.dataset.maxFile !== \"\" ? +imputDocumentFile.dataset.maxFile : 3;\n  var dataMaxSize = !!imputDocumentFile.dataset.maxFile && imputDocumentFile.dataset.maxSize !== \"\" ? +imputDocumentFile.dataset.maxSize : 5; //\n\n  var fileUploadNewReview = new FileUpload();\n  fileUploadNewReview.Init(null, curentImageContactFilePath, curentImageContactBackgroundUrl, \"#inputRatingFormFile\", //file\n  \"#newReviewContainer\", //review showing\n  \"#newReviewContainer\", //new showing\n  \"#frmProductRating\", dataMaxFile, console.log(\"change\"), true, \"RatingFormFile\", dataMaxSize); //unique name\n} //contact\n\n\nfunction clearform() {\n  $('#frmProductRating')[0].reset();\n  var imageReverContainer = document.getElementById(\"newReviewContainer\");\n\n  if (!!imageReverContainer) {\n    imageReverContainer.innerHTML = \"\";\n  }\n}\n\nfunction loadScrollNav() {\n  var btnNavs = document.querySelectorAll(\"[data-nav-product-detail] button\");\n\n  for (var i = 0; i < btnNavs.length; i++) {\n    btnNavs[i].addEventListener(\"click\", function (eve) {\n      //Site.LockOnsCroll = true;\n      Site.ScrollToElement(\"[data-section='\" + eve.currentTarget.dataset.target + \"']\"); //setTimeout(function () {\n      //    //Site.LockOnsCroll = false;\n      //    document.querySelector(\"[data-head]\").classList.remove(\"_zDocActive\");\n      //}, 3000);\n    });\n  } //window.onscroll = function () {\n  //    if (!Site.LockOnsCroll) {\n  //        updateZDocActive();\n  //    }\n  //};\n\n}\n\nfunction processFancybox() {//$(\"a._z-fancyBox\").fancybox();\n}\n\nfunction processAnonymousUser() {\n  var canvases = document.querySelectorAll(\"._id-listRatings canvas\");\n\n  for (var i = 0; i < canvases.length; i++) {\n    var canvas = canvases[i];\n    var name = canvas.dataset.userName,\n        nameSplit = name.split(\" \"),\n        initials = nameSplit.length > 2 ? nameSplit[0].charAt(0).toUpperCase() + nameSplit[1].charAt(0).toUpperCase() : nameSplit[0].charAt(0).toUpperCase();\n    var context = canvas.getContext(\"2d\");\n    var canvasCssWidth = canvas.width,\n        canvasCssHeight = canvas.height;\n\n    if (window.devicePixelRatio) {\n      canvas.setAttribute(\"width\", canvasCssWidth * window.devicePixelRatio);\n      canvas.setAttribute(\"height\", canvasCssHeight * window.devicePixelRatio);\n      canvas.style.width = canvasCssWidth + \"px\";\n      canvas.style.height = canvasCssHeight + \"px\";\n      context.scale(window.devicePixelRatio, window.devicePixelRatio);\n    }\n\n    context.fillStyle = stringToHslColor(initials, 30, 80);\n    context.fillRect(0, 0, canvas.width, canvas.height);\n    context.font = canvasCssHeight / 2 + \"px Arial\";\n    context.textAlign = \"center\";\n    context.fillStyle = \"#FFF\";\n    context.fillText(initials, canvasCssWidth / 2, canvasCssHeight / 1.5);\n  }\n}\n\nfunction stringToHslColor(str, s, l) {\n  var hash = 0;\n\n  for (var i = 0; i < str.length; i++) {\n    hash = str.charCodeAt(i) + ((hash << 5) - hash);\n  }\n\n  var h = hash % 360;\n  return 'hsl(' + h + ', ' + s + '%, ' + l + '%)';\n}\n\nvar zDockInterval = setInterval(function () {\n  var sectionActive = 1;\n\n  for (var i = 0; i < listSections.length; i++) {\n    if (!listSections[i]) {\n      continue;\n    }\n\n    if (listSections[i].getBoundingClientRect().y < 5) {\n      sectionActive = listSections[i].dataset.section;\n    }\n  }\n\n  dataHead.dataset.sessionActive = sectionActive;\n}, 100); //\n\nfunction loadFlashSaleSwiper() {\n  Site.bLazy.load(document.querySelectorAll(\".swiper-flashsale-container img\", true), false);\n  var isMobile = document.querySelector(\"[data-device=Mobile]\");\n  var isDesktop = document.querySelector(\"[data-device=Desktop]\");\n  var slidesPerView = 3;\n\n  if (isMobile) {\n    slidesPerView = 1;\n  } else if (!isDesktop) {\n    slidesPerView = 2;\n  }\n\n  var flashSales = new Swiper('.swiper-flashsale-container', {\n    slidesPerView: slidesPerView,\n    spaceBetween: 10,\n    loop: false,\n    lazy: {\n      loadPrevNext: true\n    },\n    preloadImages: false,\n    //autoplay: {\n    //    delay: 4000,\n    //    disableOnInteraction: false\n    //},\n    navigation: {\n      nextEl: '.swiper-button-next',\n      prevEl: '.swiper-button-prev'\n    }\n  });\n}\n\nfunction atiCopyRight() {\n  var itemListElement = document.querySelector(\"[itemprop='itemListElement']:last-child\");\n  var text = itemListElement.innerText;\n  var url = itemListElement.querySelector(\"[content]\").attributes[\"content\"].value;\n  var fakaH3Tag = document.createElement(\"h3\");\n  fakaH3Tag.classList = \"d-none\";\n  var atag = document.createElement(\"a\");\n  atag.innerText = text + \" tại \" + window.location.hostname + \"\";\n  atag.href = url;\n  atag.alt = \"Chi tiết sản phẩm \" + text + \" tại \" + window.location.hostname + \". \";\n  atag.classList = \"_atyc\";\n  fakaH3Tag.appendChild(atag);\n  fakaH3Tag.setAttribute(\"style\", \"display:block !important;font-size:0 !important;height:0; color:transparent !important;  \");\n  var container = document.querySelector(\"[data-html-content]\");\n  container.insertBefore(fakaH3Tag, container.querySelector(\"h3 ~ p\"));\n}\n\nfunction init() {\n  activeProductClass = document.querySelector(\"[data-active-product-classification]\");\n  listQuantities = document.querySelectorAll(\"._quantity\");\n  chkOutOfStock = document.querySelector(\"[data-out-of-stock]\");\n  txtQuantity = document.querySelector(\"[data-quantity]\");\n  attribute1Items = document.querySelectorAll('input[name=\"Attribute1Value\"]');\n  attribute2Items = document.querySelectorAll('input[name=\"Attribute2Value\"]');\n  productClassificationId = document.querySelector(\"[name=ProductClassificationId]\");\n  dataPrice = document.querySelector(\"[data-price]\");\n  dataDelPrice = document.querySelector(\"[data-del-price]\");\n  discountPercentEle = document.querySelector(\"[data-css-discount]\");\n  newestPostsContainer = document.querySelector(\"[data-selector-newest-post]\");\n  flashSaleContainer = document.querySelector(\"[data-flash-sale-detail]\");\n  dataCountEle = flashSaleContainer.querySelector(\"[data-count]\");\n  dataProcessBarEle = flashSaleContainer.querySelector(\"progress\");\n  listSections = [document.querySelector(\"[data-section='1']\"), document.querySelector(\"[data-section='2']\"), document.querySelector(\"[data-section='3']\"), document.querySelector(\"[data-section='4']\"), document.querySelector(\"[data-section='5']\"), document.querySelector(\"[data-section='6']\"), document.querySelector(\"[data-section='7']\")];\n  dataHead = document.querySelector(\"main\");\n}\n\n;\n\nfunction reloadMoneyAndQuantity() {\n  var attributeValue1 = !!document.querySelector('input[name=\"Attribute1Value\"]:checked') ? document.querySelector('input[name=\"Attribute1Value\"]:checked').value : \"\";\n  var attributeValue2 = !!document.querySelector('input[name=\"Attribute2Value\"]:checked') ? document.querySelector('input[name=\"Attribute2Value\"]:checked').value : \"\";\n  var selectedQuantityInfo = listPriceInfo.filter(function (item) {\n    return item.attribute1Value === attributeValue1 && item.attribute2Value === attributeValue2;\n  }); //TODO reload slider by productClass\n\n  activeProductClass.dataset.activeProductClassification = selectedQuantityInfo[0].productClassificationId; //LoadSwiperDefault();\n\n  if (isFistLoad) {\n    isFistLoad = false;\n  } else {\n    SlideToProductClass(selectedQuantityInfo[0].productClassificationId);\n  } //TODO reload slider by productClass\n\n\n  if (selectedQuantityInfo.length === 0) {\n    chkOutOfStock.checked = true;\n    return;\n  }\n\n  ;\n  history.replaceState(null, null, selectedQuantityInfo[0].url); //location.replace(selectedQuantityInfo[0].url);\n\n  var quantity = selectedQuantityInfo[0].quantity;\n  productClassificationId.value = selectedQuantityInfo[0].productClassificationId;\n  chkOutOfStock.checked = quantity <= 0;\n  txtQuantity.max = quantity;\n\n  if (+txtQuantity.value > +txtQuantity.max) {\n    txtQuantity.value = +txtQuantity.max;\n  } //\n\n\n  var selectedClassItem = listPriceInfo.filter(function (item) {\n    return item.attribute1Value === attributeValue1 && item.attribute2Value === attributeValue2;\n  })[0];\n  var quantitiesPrices = selectedClassItem.quantitiesPrice;\n  var priceUnit = quantitiesPrices[quantitiesPrices.length - 1].money;\n\n  for (var i = quantitiesPrices.length - 1; i >= 0; i--) {\n    if (quantitiesPrices[i].range !== 0 && +txtQuantity.value >= quantitiesPrices[i].range) {\n      break;\n    }\n\n    priceUnit = quantitiesPrices[i].money;\n  }\n\n  dataPrice.innerHTML = WNumbHelper.GetFrNumber(priceUnit) + \"<sup>đ</sup>\";\n  dataPrice.dataset.price = priceUnit;\n  dataPrice.style.visibility = \"visible\";\n  dataDelPrice.classList.add(\"hide\");\n\n  if (priceUnit < +dataDelPrice.dataset.delPrice) {\n    dataDelPrice.classList.remove(\"hide\");\n  }\n\n  discountPercentEle.classList.add(\"hide\");\n  var discountPercent = 100 - priceUnit * 100 / selectedClassItem.price;\n\n  if (discountPercent > 0) {\n    discountPercentEle.classList.remove(\"hide\");\n    discountPercentEle.innerText = (selectedClassItem.isFlashSale ? \"Flash Sale -\" : \"Giảm \") + Number(discountPercent).toFixed(2) + \"%\";\n  }\n\n  dataCountEle.removeAttribute(\"data-flash-deal-count-down\");\n  dataProcessBarEle.removeAttribute(\"data-is-host\");\n  flashSaleContainer.classList.add(\"hide\");\n\n  if (selectedClassItem.isFlashSale) {\n    flashSaleContainer.classList.remove(\"hide\");\n\n    if (selectedClassItem.valueQuantity <= 0) {\n      dataCountEle.dataset.flashDealCountDown = selectedClassItem.countDownTime;\n      checkTimeCountDown(\"[data-css-simple-detail]\");\n    } else {\n      dataCountEle.innerText = \"còn \" + selectedClassItem.countDownQuantity + \" sản phẩm\";\n    }\n\n    if (selectedClassItem.valueQuantity * selectedClassItem.maxHours > selectedClassItem.hours * selectedClassItem.maxValueQuantity) //valueQuantity  / maxValueQuantity > hours / maxHours\n      {\n        debugger;\n        dataProcessBarEle.setAttribute(\"data-is-hot\", \"true\");\n        dataProcessBarEle.max = selectedClassItem.maxValueQuantity;\n        dataProcessBarEle.value = selectedClassItem.valueQuantity;\n      } else {\n      dataProcessBarEle.removeAttribute(\"data-is-hot\");\n      dataProcessBarEle.max = selectedClassItem.maxHours;\n      dataProcessBarEle.value = selectedClassItem.hours;\n    }\n  } //const rowItems = document.querySelectorAll(\"[data-class-id]\");\n  //var summaryMoney = 0;\n  //for (let i = 0; i < rowItems.length;i++) {\n  //    const unitPrice = +rowItems[i].querySelector(\"[data-unit-price]\").dataset.unitPrice;\n  //    const quantity = +rowItems[i].querySelector(\"[data-quantity]\").value;\n  //    const itemPrice = rowItems[i].querySelector(\"[data-item-price]\");\n  //    const itemMoney = unitPrice * quantity;\n  //    summaryMoney += itemMoney;\n  //    itemPrice.innerHTML = WNumbHelper.GetFrNumber(itemMoney);\n  //}\n  //const summaryItem = document.querySelector(\"[data-summary]\");\n  //summaryItem.innerHTML = WNumbHelper.GetFrNumber(summaryMoney);\n\n\n  var frmAddToCart = document.querySelector(\"#frmAddToCart\");\n\n  if (!!frmAddToCart) {\n    var productId = frmAddToCart.querySelectorAll('[name=ProductClassificationId]')[1].value || frmAddToCart.querySelectorAll('[name=ProductClassificationId]')[0].value;\n    var productClassSelected = document.querySelector('[data-css-simple-detail] [type=radio]:checked');\n    var productClassName = productClassSelected != null ? productClassSelected.value : \"\";\n    var productName = document.querySelector('[name=ProductName]').value;\n    EnhancedEcommerce.AddImpression(productId, productName, productClassName);\n  }\n}\n\nfunction updateAnalytic() {\n  var frmAddToCart = document.querySelector(\"#frmAddToCart\");\n\n  if (!!frmAddToCart) {\n    var productId = frmAddToCart.querySelectorAll('[name=ProductClassificationId]')[1].value || frmAddToCart.querySelectorAll('[name=ProductClassificationId]')[0].value;\n    var productClassSelected = document.querySelector('[data-css-simple-detail] [type=radio]:checked');\n    var productClassName = productClassSelected != null ? productClassSelected.value : \"\";\n    var productName = document.querySelector('[name=ProductName]').value;\n    var price = document.querySelector('[data-css-simple-detail] [data-price]').dataset.price;\n    EnhancedEcommerce.AddProduct(productId, productName, productClassName, '', '', price);\n  }\n}\n\nfunction btnByNowClick(eve) {\n  window.location = eve.target.dataset.href;\n}\n\nfunction load360Spin() {\n  var spritespin = document.querySelector('.spritespin');\n\n  if (spritespin) {\n    if (!!spritespin.dataset.width) {\n      $('.spritespin').spritespin({\n        source: image360Sources,\n        width: Math.min(document.querySelector('#spin360').getBoundingClientRect().width, 500),\n        height: Math.min(document.querySelector('#spin360').getBoundingClientRect().width, 500),\n        // reverse interaction direction\n        sense: -1,\n        frameTime: 100,\n        responsive: false\n      });\n    } else {\n      $('.spritespin').spritespin({\n        source: image360Sources,\n        width: 500,\n        height: 500,\n        // reverse interaction direction\n        sense: -1,\n        frameTime: 100,\n        responsive: true\n      });\n    }\n  }\n}\n\nfunction ratingCompleteCallBack() {\n  console.log(\"Reload ratings\");\n  document.querySelector(\"#ratingSection details\").removeAttribute(\"open\");\n}\n\nfunction loadJqueryZoom() {\n  var isDesktop = document.querySelector(\"[data-device=Desktop]\");\n\n  if (!!isDesktop) {\n    var imageThumnails = document.querySelectorAll('[data-zoom]');\n\n    for (var i = 0; i < imageThumnails.length; i++) {\n      new Drift(imageThumnails[i], {\n        paneContainer: document.querySelector(\"[data-css-simple-detail]\")\n      });\n    }\n  }\n}"]}