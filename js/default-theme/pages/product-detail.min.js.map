{"version":3,"sources":["wwwroot/js/default-theme/pages/product-detail.js"],"names":["listQuantities","chkOutOfStock","txtQuantity","attribute1Items","attribute2Items","productClassificationId","dataPrice","newestPostsContainer","activeProductClass","init","document","querySelector","querySelectorAll","reloadMoneyAndQuantity","attributeValue1","value","attributeValue2","selectedQuantityInfo","listPriceInfo","filter","item","attribute1Value","attribute2Value","dataset","activeProductClassification","SlideToProductClass","length","history","pushState","url","quantity","checked","max","quantitiesPrices","quantitiesPrice","priceUnit","money","i","range","innerHTML","WNumbHelper","GetFrNumber","console","log","btnByNowClick","eve","window","location","target","href","load360Spin","spritespin","width","$","source","image360Sources","height","sense","frameTime","responsive","ratingCompleteCallBack","loadJqueryZoom","imageThumnails","Drift","paneContainer","addEventListener","Quantity","Init","JsBarcode"],"mappings":"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","file":"product-detail.min.js","sourcesContent":["\"use strict\";\n\nvar listQuantities, chkOutOfStock, txtQuantity, attribute1Items, attribute2Items, productClassificationId, dataPrice, newestPostsContainer;\nvar activeProductClass;\ndocument.addEventListener(\"DOMContentLoaded\", function () {\n  init();\n  var i;\n\n  for (i = 0; i < listQuantities.length; i++) {\n    var quantity = new Quantity();\n    quantity.Init(listQuantities[i], reloadMoneyAndQuantity);\n  }\n\n  for (i = 0; i < attribute1Items.length; i++) {\n    attribute1Items[i].addEventListener(\"change\", reloadMoneyAndQuantity);\n  }\n\n  for (i = 0; i < attribute2Items.length; i++) {\n    attribute2Items[i].addEventListener(\"change\", reloadMoneyAndQuantity);\n  }\n\n  reloadMoneyAndQuantity();\n  loadJqueryZoom();\n  JsBarcode(\"._barcode\").init();\n  load360Spin();\n});\n\nfunction init() {\n  activeProductClass = document.querySelector(\"[data-active-product-classification]\");\n  listQuantities = document.querySelectorAll(\"._quantity\");\n  chkOutOfStock = document.querySelector(\"[data-out-of-stock]\");\n  txtQuantity = document.querySelector(\"[data-quantity]\");\n  attribute1Items = document.querySelectorAll('input[name=\"Attribute1Value\"]');\n  attribute2Items = document.querySelectorAll('input[name=\"Attribute2Value\"]');\n  productClassificationId = document.querySelector(\"[name=ProductClassificationId]\");\n  dataPrice = document.querySelector(\"[data-price]\");\n  newestPostsContainer = document.querySelector(\"[data-selector-newest-post]\");\n}\n\n;\n\nfunction reloadMoneyAndQuantity() {\n  var attributeValue1 = !!document.querySelector('input[name=\"Attribute1Value\"]:checked') ? document.querySelector('input[name=\"Attribute1Value\"]:checked').value : \"\";\n  var attributeValue2 = !!document.querySelector('input[name=\"Attribute2Value\"]:checked') ? document.querySelector('input[name=\"Attribute2Value\"]:checked').value : \"\";\n  var selectedQuantityInfo = listPriceInfo.filter(function (item) {\n    return item.attribute1Value === attributeValue1 && item.attribute2Value === attributeValue2;\n  }); //TODO reload slider by productClass\n\n  activeProductClass.dataset.activeProductClassification = selectedQuantityInfo[0].productClassificationId; //LoadSwiperDefault();\n\n  SlideToProductClass(selectedQuantityInfo[0].productClassificationId); //TODO reload slider by productClass\n\n  if (selectedQuantityInfo.length === 0) {\n    chkOutOfStock.checked = true;\n    return;\n  }\n\n  ;\n  history.pushState(null, null, selectedQuantityInfo[0].url); //location.replace(selectedQuantityInfo[0].url);\n\n  var quantity = selectedQuantityInfo[0].quantity;\n  productClassificationId.value = selectedQuantityInfo[0].productClassificationId;\n  chkOutOfStock.checked = quantity <= 0;\n  txtQuantity.max = quantity;\n\n  if (+txtQuantity.value > +txtQuantity.max) {\n    txtQuantity.value = +txtQuantity.max;\n  } //\n\n\n  var quantitiesPrices = listPriceInfo.filter(function (item) {\n    return item.attribute1Value === attributeValue1 && item.attribute2Value === attributeValue2;\n  })[0].quantitiesPrice;\n  var priceUnit = quantitiesPrices[quantitiesPrices.length - 1].money;\n\n  for (var i = quantitiesPrices.length - 1; i >= 0; i--) {\n    if (quantitiesPrices[i].range !== 0 && +txtQuantity.value >= quantitiesPrices[i].range) {\n      break;\n    }\n\n    priceUnit = quantitiesPrices[i].money;\n  }\n\n  dataPrice.innerHTML = WNumbHelper.GetFrNumber(priceUnit);\n  console.log(quantity); //const rowItems = document.querySelectorAll(\"[data-class-id]\");\n  //var summaryMoney = 0;\n  //for (let i = 0; i < rowItems.length;i++) {\n  //    const unitPrice = +rowItems[i].querySelector(\"[data-unit-price]\").dataset.unitPrice;\n  //    const quantity = +rowItems[i].querySelector(\"[data-quantity]\").value;\n  //    const itemPrice = rowItems[i].querySelector(\"[data-item-price]\");\n  //    const itemMoney = unitPrice * quantity;\n  //    summaryMoney += itemMoney;\n  //    itemPrice.innerHTML = WNumbHelper.GetFrNumber(itemMoney);\n  //}\n  //const summaryItem = document.querySelector(\"[data-summary]\");\n  //summaryItem.innerHTML = WNumbHelper.GetFrNumber(summaryMoney);\n}\n\nfunction btnByNowClick(eve) {\n  window.location = eve.target.dataset.href;\n}\n\nfunction load360Spin() {\n  var spritespin = document.querySelector('.spritespin');\n\n  if (spritespin) {\n    if (!!spritespin.dataset.width) {\n      $('.spritespin').spritespin({\n        source: image360Sources,\n        width: 480,\n        height: 480,\n        // reverse interaction direction\n        sense: -1,\n        frameTime: 100,\n        responsive: false\n      });\n    } else {\n      $('.spritespin').spritespin({\n        source: image360Sources,\n        width: 480,\n        height: 480,\n        // reverse interaction direction\n        sense: -1,\n        frameTime: 100,\n        responsive: true\n      });\n    }\n  }\n}\n\nfunction ratingCompleteCallBack() {\n  console.log(\"Reload ratings\");\n}\n\nfunction loadJqueryZoom() {\n  var isDesktop = document.querySelector(\"[data-device=Desktop]\");\n\n  if (!!isDesktop) {\n    var imageThumnails = document.querySelectorAll('[data-zoom]');\n\n    for (var i = 0; i < imageThumnails.length; i++) {\n      new Drift(imageThumnails[i], {\n        paneContainer: document.querySelector(\"[data-css-simple-detail]\")\n      });\n    }\n  }\n}"]}