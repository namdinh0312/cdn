{"version":3,"sources":["file-upload.js","viewed-products.js","pta-swiper.js","quantity-up-down.js","product-detail.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC5BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACzNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"product-detail.bundle.js","sourcesContent":["\"use strict\";\r\n\r\n/* * * * * * * * * * * * * * * * *\r\n * LocalStorageHelper\r\n * javascript page navigation\r\n * * * * * * * * * * * * * * * * */\r\nfunction FileUpload() {\r\n    this.InputElement = null;\r\n    this.PreviewBoxElement = null;\r\n    this.CurentImageBox = null;\r\n    this.Form = null;\r\n    this.MaxFile = null;\r\n    this.StoredFiles = [];\r\n    this.CurentFiles = [];\r\n    this.CurentPreviewImages = [];\r\n    this.Extend = function (hostCdn, arrayCurentFileNames, arrayCurentPreviewImages, inputElement, curentImageBox, previewBoxEle, form, maxfile, inputChangeCallback, isCreateInputName, uniqueControlName, maxFileSize) {\r\n        var self = this;\r\n        this.InputElement = inputElement;\r\n        this.AcceptExtention = inputElement.accept.split(\",\");\r\n        this.PreviewBoxElement = previewBoxEle;\r\n        this.CurentImageBox = curentImageBox;\r\n        this.Form = form;\r\n        \r\n        this.UniqueControlName = (!uniqueControlName ? \"NewFiles\" + uniqueControlName : \"CurentFilePaths\") ;\r\n        this.MaxFile = maxfile || 2;\r\n        this.MaxFileSize = maxFileSize || 5*1024*1024; \r\n        this.InputChangeCallBack = inputChangeCallback !== undefined ? inputChangeCallback : null;\r\n        this.InputElement.addEventListener(\"change\", this.InputChange);\r\n        this.InputElement.fileUpload = this;\r\n        this.FileReader = new FileReader();\r\n        this.IsCreateInputName = isCreateInputName || false;\r\n        this.HostCdn = hostCdn || \"\";\r\n        this.CurentFiles = arrayCurentFileNames || [];\r\n        this.CurentPreviewImages = arrayCurentPreviewImages || [];\r\n        this.Process();\r\n    };\r\n\r\n    this.Process = function () {\r\n        if (!this.CurentImageBox) {\r\n            return;\r\n        }\r\n        var self = this;\r\n\r\n        for (let i = 0; i < this.CurentFiles.length; i++) {\r\n            var f = this.CurentFiles[i];\r\n            var reviewf = this.CurentPreviewImages[i];\r\n            var container = document.createElement(\"div\");\r\n            container.className = \"col-3 gutter-10 _p-item\";\r\n\r\n            var figure = document.createElement('figure');\r\n            figure.className = \"_max-height-200 relative hover-children-show\";\r\n            var btn = document.createElement('button');\r\n\r\n            btn.className = \"absolute hide tablet-show -border width-100 height-100 _fill-silver-opacity text-strong\";\r\n            btn.innerText = \"CLICK ĐỂ XÓA\";\r\n            btn.type = \"button\";\r\n            btn.dataset.file = f;\r\n            btn.dataset.notClose = \"I\";\r\n\r\n            btn.addEventListener(\"click\", function (evt) {\r\n                //var parentContainer = Site.FindParent(evt.target, '_p-item');\r\n                //parentContainer.remove();\r\n                self.RemoveCurentFile(evt, self.InputElement);\r\n            });\r\n\r\n            var fileName = f.substring(f.lastIndexOf('/') + 1);\r\n            var figureHtml;\r\n\r\n            if (!f.type.match(\"image.*\")) {\r\n                figureHtml =\r\n                    \"<img class='_max-width-100-percent'   onerror='this.src=\\\"/images/shared/no-image.svg\\\"'   src='\" +\r\n                    self.HostCdn +\r\n                    reviewf +\r\n                    \"' alt='\" +\r\n                    fileName +\r\n                    \"' data-file='\" +\r\n                    fileName +\r\n                    \"' /><figcaption class='padding-5 text-center _text-ellipsis'>\" +\r\n                    fileName +\r\n                    \"</figcaption>\";\r\n            } else {\r\n                var fileExt = fileName.substring(fileName.indexOf('.') + 1);\r\n                figureHtml = \"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512' version='1'><path d='M128 0c-18 0-32 14-32 32v448c0 18 14 32 32 32h320c18 0 32-14 32-32V128L352 0H128z' fill='#e2e5e7'/><path d='M384 128h96L352 0v96c0 18 14 32 32 32z' fill='#b0b7bd'/><path fill='#cad1d8' d='M480 224l-96-96h96z'/><path d='M416 416c0 9-7 16-16 16H48c-9 0-16-7-16-16V256c0-9 7-16 16-16h352c9 0 16 7 16 16v160z' fill='#f15642'/><path d='M400 432H96v16h304c9 0 16-7 16-16v-16c0 9-7 16-16 16z' fill='#cad1d8'/><text y='375' x='212' style='line-height:1.25;text-align:center' font-weight='400' font-size='147' font-family='sans-serif' letter-spacing='0' word-spacing='0' text-anchor='middle' stroke-width='3'><tspan style='line-height:1.25;-inkscape-font-specification:'monospace Bold';text-align:center' y='375' x='212' font-weight='700' font-family='monospace' fill='#fff'>\" + fileExt+\"</tspan></text></svg>\";\r\n            }\r\n            \r\n\r\n            if (self.IsCreateInputName) {\r\n                var input = \"<input type='text' class='_hidden'    name='\" + self.UniqueControlName + \"' value=\" + f + (!!self.Form ? \" form='\" + self.Form.id + \"'\" : \"\") + \"></input>\";\r\n                figureHtml += input;\r\n            }\r\n\r\n            figure.innerHTML = figureHtml;\r\n            figure.insertBefore(btn, figure.childNodes[0]);\r\n            container.appendChild(figure);\r\n            self.CurentImageBox.appendChild(container);\r\n        }\r\n    };\r\n    this.InputChange = function (evt) {\r\n        var self = evt.target.fileUpload;\r\n        var files = evt.target.files;\r\n        var filesArr = Array.prototype.slice.call(files);\r\n        self.PreviewBoxElement.innerHTML = \"\";\r\n        self.StoredFiles = [];\r\n\r\n        for (var i = 0; i < filesArr.length; i++) {\r\n            var f = filesArr[i];\r\n\r\n            if (f.size > self.MaxFileSize) {\r\n                Site.NotifyFormFailed(\"Lỗi\", \"File không được lớn hơn \" + self.MaxFileSize / (1024 * 1024) + \" mb\");\r\n                continue;\r\n            }\r\n\r\n            self.StoredFiles.push(f);\r\n\r\n            if (self.PreviewBoxElement === self.CurentImageBox) {\r\n                self.CurentFiles = [];\r\n                self.CurentImageBox.innerHTML = \"\";\r\n            }\r\n\r\n            if (self.StoredFiles.length + self.CurentFiles.length <= self.MaxFile) {\r\n                var reader = new FileReader();\r\n                reader.onload = function (e) {\r\n                    var fileReader = event.target;\r\n                    var container = document.createElement(\"div\");\r\n                    container.className = \"gutter-10 _p-item\";\r\n\r\n                    var figure = document.createElement('figure');\r\n                    figure.className = \"_max-height-200 relative hover-children-show\";\r\n\r\n                    var btn = document.createElement('button');\r\n                    btn.className = \"absolute hide -border width-100 height-100 _fill-silver-opacity text-strong\";\r\n                    btn.type = \"button\";\r\n                    btn.innerText = \"CLICK ĐỂ XÓA\";\r\n                    btn.dataset.file = fileReader.name;\r\n                    btn.dataset.notClose = \"I\";\r\n\r\n                    btn.addEventListener(\"click\", function (evt) {\r\n                        //var parentContainer = Site.FindParent(evt.target, '_p-item');\r\n                        //parentContainer.remove();\r\n                        self.RemoveFile(evt, self.InputElement);\r\n                    });\r\n                 \r\n                    var figureHtml;\r\n\r\n                    if (fileReader.fileType.match(\"image.*\")) {\r\n                        figureHtml = \"<img class='width-100 _max-width-100-percent' src='\" + e.target.result + \"' alt='\" + fileReader.name + \"' data-file='\" + fileReader.name + \"' /><figcaption class='padding-5 text-center _text-ellipsis'>\" + \"(\" + fileReader.size % 1000 + \" kb) \" + fileReader.name + \"</figcaption>\";\r\n                    } else {\r\n                        var fileExt = fileReader.name.substring(fileReader.name.indexOf('.') + 1);\r\n                        figureHtml = \"<svg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 512 512' version='1'><path d='M128 0c-18 0-32 14-32 32v448c0 18 14 32 32 32h320c18 0 32-14 32-32V128L352 0H128z' fill='#e2e5e7'/><path d='M384 128h96L352 0v96c0 18 14 32 32 32z' fill='#b0b7bd'/><path fill='#cad1d8' d='M480 224l-96-96h96z'/><path d='M416 416c0 9-7 16-16 16H48c-9 0-16-7-16-16V256c0-9 7-16 16-16h352c9 0 16 7 16 16v160z' fill='#f15642'/><path d='M400 432H96v16h304c9 0 16-7 16-16v-16c0 9-7 16-16 16z' fill='#cad1d8'/><text y='375' x='212' style='line-height:1.25;text-align:center' font-weight='400' font-size='147' font-family='sans-serif' letter-spacing='0' word-spacing='0' text-anchor='middle' stroke-width='3'><tspan style='line-height:1.25;-inkscape-font-specification:'monospace Bold';text-align:center' y='375' x='212' font-weight='700' font-family='monospace' fill='#fff'>\" + fileExt + \"</tspan></text></svg>\" + \"<figcaption class='padding-5 text-center _text-ellipsis'>\" + \"(\" + fileReader.size % 1000 + \" kb) \" + fileReader.name + \"</figcaption>\";\r\n                    }\r\n\r\n                    if (self.IsCreateInputName) {\r\n                        var input = \"<input type='text' class='_hidden' name='\" + self.UniqueControlName + \"[]' value=\" + fileReader.name + (!!self.Form ? \" form='\" + self.Form.id + \"'\" : \"\") + \"></input>\";\r\n                        figureHtml += input;\r\n                    }\r\n\r\n                    figure.innerHTML = figureHtml;\r\n                    figure.insertBefore(btn, figure.childNodes[0]);\r\n                    container.appendChild(figure);\r\n                    self.PreviewBoxElement.appendChild(container);\r\n                };\r\n                reader.size = f.size;\r\n                reader.fileType = f.type;\r\n                reader.name = f.name;\r\n                reader.readAsDataURL(f);\r\n            }\r\n        }\r\n       \r\n        if (!!self.InputChangeCallBack) {\r\n            self.InputChangeCallBack(self.StoredFiles);\r\n        }\r\n    };\r\n    this.RemoveCurentFile = function (evt) {\r\n        var file = evt.target.dataset.file;\r\n        for (var i = 0; i < this.CurentFiles.length; i++) {\r\n            if (this.CurentFiles[i] === file) {\r\n                this.CurentFiles.splice(i, 1);\r\n                break;\r\n            }\r\n        }\r\n        var parentContainer = Site.FindParent(evt.target, '_p-item');\r\n        parentContainer.remove();\r\n    };\r\n    this.RemoveFile = function (evt, fuploadElement) {\r\n        var file = evt.target.dataset.file;\r\n\r\n        for (var i = 0; i < this.StoredFiles.length; i++) {\r\n            if (this.StoredFiles[i].name === file) {\r\n                this.StoredFiles.splice(i, 1);\r\n                break;\r\n            }\r\n        }\r\n        var parentContainer = Site.FindParent(evt.target, '_p-item');\r\n        parentContainer.remove();\r\n\r\n        //debugger;\r\n        //this.InputElement.addEventListener(\"change\", this.InputChange);\r\n        Site.ClearInputFile(fuploadElement);\r\n    };\r\n    // init\r\n    this.Init = function (hostCdn, arrayCurentFileNames, arrayCurentPreviewImages, inputSelector, curentImageBoxSelector, previewBoxSelector, formSelector, maxFileCount, inputChangeCallback, isCreateInputName, uniqueControlName, maxFileSize) {\r\n\r\n        var inputEle = document.querySelector(inputSelector);\r\n        var previewBox = document.querySelector(previewBoxSelector);\r\n        var curentImageBox = document.querySelector(curentImageBoxSelector);\r\n        var form = document.querySelector(formSelector);\r\n\r\n        if (inputEle == null || previewBox == null) {\r\n            console.warn(inputSelector + \" or \" + previewBox + \": NULL\");\r\n        }\r\n\r\n        this.Extend(hostCdn, arrayCurentFileNames, arrayCurentPreviewImages, inputEle, curentImageBox, previewBox, form, maxFileCount, inputChangeCallback, isCreateInputName, uniqueControlName, maxFileSize);\r\n    };\r\n};","\"use strict\";\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\",\r\n    function() {\r\n        loadUserViewedProduct();\r\n    });\r\n\r\nfunction loadUserViewedProduct() {\r\n    var productClassObjs = LocalStorageHelper.Get(LocalStorageNamesEnum.ViewProductClassificationIds);\r\n\r\n    if (!productClassObjs || !productClassObjs.length) {\r\n        return;\r\n    }\r\n\r\n    \r\n    var productViewedContainer = document.querySelector(\"#productViewedContainer\");\r\n\r\n    for (var i = 0; i < productClassObjs.length; i++) {\r\n        var productItem = productClassObjs[i];       \r\n        var strElement = '<a href=\"[ProductUrl]\" title=\"[ProductName]\" class=\"_image-wrap tablet-margin -tablet-margin-bottom rounded-4 border-1 solid border-silver padding-5\"> <img alt=\"[ProductName]\" class=\"b-lazy\" src=\"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" data-src=\"[ProductThumnailUrl]\"></a>';\r\n        strElement = strElement.replace(/\\[ProductUrl\\]/g, productItem.ProductUrl);\r\n        strElement = strElement.replace(/\\[ProductName\\]/g, productItem.ProductName);\r\n        strElement = strElement.replace(/\\[ProductThumnailUrl\\]/g, productItem.ProductThumnailUrl);\r\n        productItem = Site.HtmlToElement(strElement);\r\n        productViewedContainer.appendChild(productItem[0]);\r\n    }\r\n\r\n    Site.BeLazyRevalidate();\r\n}","var galleryThumbs;\r\nvar galleryTop;\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\",\r\n    function (event) {\r\n\r\n        LoadSwiperDefault();\r\n        var btnShow = document.querySelector('._p-show-photowipe');\r\n        btnShow.addEventListener(\"click\",\r\n            function (eve) {\r\n                var index = galleryTop.activeIndex;\r\n                _LoadImageSwipe(eve.target.dataset.selector, index);\r\n            });\r\n\r\n    });\r\n\r\nfunction SlideToProductClass(productClassId) {\r\n    var slideClassName = \"swiper-slide-\" + productClassId;\r\n\r\n    for (var i = 1; i < galleryTop.slides.length; i++) {\r\n        if (galleryTop.slides[i].classList.contains(slideClassName)) {\r\n            galleryTop.slideTo(i);\r\n            break;\r\n        }\r\n    }\r\n}\r\n\r\nfunction LoadSwiperDefault() {\r\n    //TODO reload slider by productClass\r\n    //var activeProductClasss = document.querySelector(\"[data-active-product-classification]\");\r\n    //var slideClassName = \"swiper-slide-\" + activeProductClasss.dataset.activeProductClassification;\r\n\r\n    //var allSlides = document.querySelectorAll(\"[data-slide]\");\r\n\r\n    //for (var i = 0; i < allSlides.length; i++) {\r\n    //    allSlides[i].classList.add(\"swiper-slide\");\r\n    //    allSlides[i].classList.remove(\"hide\");\r\n    //}\r\n\r\n    //var excludeSlides = document.querySelectorAll(\".swiper-slide:not(.\" + slideClassName + \")\");\r\n    //for (var i = 0; i < excludeSlides.length; i++) {\r\n    //    excludeSlides[i].classList.remove(\"swiper-slide\");\r\n    //    excludeSlides[i].classList.add(\"hide\");\r\n    //}\r\n    //TODO reload slider by productClass\r\n    \r\n    galleryTop = new Swiper('.gallery-top',\r\n        {\r\n            spaceBetween: 20,\r\n            //autoplay: 20000,\r\n            //speed: 400,\r\n            preloadImages: true,\r\n            centeredSlides: true,\r\n            lazy: true,\r\n            //loop: true\r\n            pagination: '.swiper-pagination',\r\n            paginationType: 'fraction',\r\n            navigation: {\r\n                nextEl: '.swiper-button-next',\r\n                prevEl: '.swiper-button-prev'\r\n            }\r\n        });\r\n\r\n    galleryTop.update();\r\n\r\n    if (!!document.querySelector(\".gallery-thumbs\")) {\r\n        galleryThumbs = new Swiper('.gallery-thumbs',\r\n            {\r\n                spaceBetween: 20,\r\n                centeredSlides: true,\r\n                slidesPerView: 4,\r\n                touchRatio: 0.2,\r\n                slideToClickedSlide: true\r\n            });\r\n\r\n        if (galleryThumbs instanceof (Array)) {\r\n            for (var i = 0; i < galleryThumbs.length; i++) {\r\n                if (galleryThumbs[i].imagesToLoad.length > 0) {\r\n                    galleryTop[i].controller.control = galleryThumbs;\r\n                    galleryThumbs[i].controller.control = galleryTop;\r\n                }\r\n            }\r\n        } else {\r\n            galleryTop.controller.control = galleryThumbs;\r\n            galleryThumbs.controller.control = galleryTop;\r\n        }\r\n\r\n        galleryThumbs.update();\r\n    }\r\n\r\n    //_LoadImageSwipe('._p-show-photowipe');\r\n}\r\n\r\nfunction _LoadImageSwipe(selector, index) {\r\n    var pswpElement = document.querySelectorAll('.pswp')[0];\r\n    var sliderEle = document.querySelector(selector);\r\n    var item, items = [];\r\n    var images = document.querySelectorAll(selector + \" .swiper-slide .hide\");\r\n    var imagesmall = document.querySelectorAll(selector + \" .swiper-slide ._p-slide-image\");\r\n\r\n    var el = document.querySelector(selector + \" .swiper-slide-active\");\r\n\r\n    if (!el) {\r\n        console.warn(\"ko có thumb dùng top gallery\");\r\n    }\r\n\r\n    for (var i = 0; i < images.length; i++) {\r\n\r\n        item = {\r\n            src: imagesmall[i].dataset.src || imagesmall[i].src,\r\n            w: imagesmall[i].width,\r\n            h: imagesmall[i].height,\r\n            alt: imagesmall[i].alt,\r\n            author: sliderEle.dataset.author\r\n        }\r\n        item.msrc = el.getAttribute('data-src') || el.getAttribute('src') ;\r\n        item.el = el; // save link to element for getThumbBoundsFn\r\n        item.title = sliderEle.dataset.seo;\r\n\r\n        item.m = {\r\n            src: imagesmall[i].dataset.src || images[i].src,\r\n            w: images[i].width,\r\n            alt: imagesmall[i].alt,\r\n            h: images[i].height,\r\n            author: sliderEle.dataset.author\r\n        };\r\n\r\n        item.o = {\r\n            src: images[i].dataset.src || images[i].src,\r\n            w: images[i].width,\r\n            alt: imagesmall[i].alt,\r\n            h: images[i].height,\r\n            author: sliderEle.dataset.author\r\n        };\r\n\r\n        items.push(item);\r\n    }\r\n\r\n\r\n\r\n    // define options (if needed)\r\n    var options = {\r\n        // history & focus options are disabled on CodePen     \r\n        index: index,\r\n        history: false,\r\n        focus: false,\r\n        //showAnimationDuration: 0,\r\n        hideAnimationDuration: 0,\r\n        getThumbBoundsFn: function (index) {\r\n            // See Options->getThumbBoundsFn section of docs for more info\r\n            var thumbnail = items[index].el.children[0],\r\n                pageYScroll = window.pageYOffset || document.documentElement.scrollTop,\r\n                rect = thumbnail.getBoundingClientRect();\r\n\r\n            return { x: rect.left, y: rect.top + pageYScroll, w: rect.width };\r\n        },\r\n        galleryUID: selector\r\n    };\r\n\r\n    var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, options);\r\n\r\n    var realViewportWidth,\r\n        useLargeImages = false,\r\n        firstResize = true,\r\n        imageSrcWillChange;\r\n    \r\n    gallery.listen('beforeResize', function () {\r\n\r\n        var dpiRatio = window.devicePixelRatio ? window.devicePixelRatio : 1;\r\n        dpiRatio = Math.min(dpiRatio, 2.5);\r\n        realViewportWidth = gallery.viewportSize.x * dpiRatio;\r\n\r\n\r\n        if (realViewportWidth >= 1200 || (!gallery.likelyTouchDevice && realViewportWidth > 800) || screen.width > 1200) {\r\n            if (!useLargeImages) {\r\n                useLargeImages = true;\r\n                imageSrcWillChange = true;\r\n                console.log(screen.width + \"use largeImage\");\r\n            }\r\n\r\n        } else {\r\n            if (useLargeImages) {\r\n                useLargeImages = false;\r\n                imageSrcWillChange = true;\r\n                console.log(screen.width + \"not use largeImage\");\r\n            }\r\n        }\r\n\r\n        if (imageSrcWillChange && !firstResize) {\r\n            gallery.invalidateCurrItems();\r\n        }\r\n\r\n        if (firstResize) {\r\n            firstResize = false;\r\n        }\r\n\r\n        imageSrcWillChange = false;\r\n\r\n    });\r\n\r\n    gallery.listen('gettingData', function (index, item) {\r\n        if (useLargeImages) {\r\n            item.src = item.o.src;\r\n            item.alt = item.o.alt;\r\n            item.w = item.o.w;\r\n            item.h = item.o.h;\r\n        } else {\r\n            item.src = item.m.src;\r\n            item.alt = item.o.alt;\r\n            item.w = item.m.w;\r\n            item.h = item.m.h;\r\n        }\r\n    });\r\n\r\n    gallery.init();\r\n}\r\n\r\n","/* * * * * * * * * * * * * * * * *\r\n * Pagination\r\n * javascript page navigation\r\n * * * * * * * * * * * * * * * * */\r\n\r\nfunction Quantity() {\r\n    // converting initialize data\r\n    this.Extend = function (downElement, upElement, targetElement, valueChangeCallBack) {\r\n        this.DownElement = downElement;\r\n        this.UpElement = upElement;\r\n        this.TargetElement = targetElement;\r\n        this.ValueChangeCallBack = valueChangeCallBack || function() {console.log(\"ValueChange don't have callback\")};\r\n        this.Process();\r\n    };\r\n\r\n    this.Process = function () {\r\n        var self = this;\r\n        this.UpElement.addEventListener(\"click\", function(eve) {\r\n            if (+self.TargetElement.value < +self.TargetElement.max) {\r\n                self.TargetElement.value = ++self.TargetElement.value;\r\n\r\n                if (!!self.ValueChangeCallBack) {\r\n                    self.ValueChangeCallBack();\r\n                }\r\n            }\r\n        });\r\n        this.DownElement.addEventListener(\"click\", function (eve) {\r\n            if (+self.TargetElement.value > +self.TargetElement.min) {\r\n                self.TargetElement.value = --self.TargetElement.value;\r\n\r\n                if (!!self.ValueChangeCallBack) {\r\n                    self.ValueChangeCallBack();\r\n                }\r\n            }\r\n        });\r\n        this.TargetElement.addEventListener(\"keyup\", function (eve) {\r\n            if (+self.TargetElement.value > +self.TargetElement.max) {\r\n                self.TargetElement.value = +self.TargetElement.max;\r\n            }\r\n            else if (+self.TargetElement.value < +self.TargetElement.min) {\r\n                self.TargetElement.value = +self.TargetElement.min;\r\n            }\r\n\r\n            if (!!self.ValueChangeCallBack) {\r\n                self.ValueChangeCallBack();\r\n            }\r\n        });\r\n\r\n        this.TargetElement.addEventListener(\"change\", function (eve) {\r\n            if (!!self.ValueChangeCallBack) {\r\n                self.ValueChangeCallBack();\r\n            }\r\n        });\r\n\r\n      \r\n    };\r\n\r\n    // init\r\n    this.Init = function (containerElement, valueChangeCallBack) {\r\n        var downElement = containerElement.querySelector(\"[data-minus]\");\r\n        var upElement = containerElement.querySelector(\"[data-plus]\");\r\n        var targetElement = containerElement.querySelector(\"input[type='number']\");\r\n        this.Extend(downElement, upElement, targetElement, valueChangeCallBack);\r\n    }\r\n};\r\n\r\n","\r\n\"use strict\";\r\n\r\nvar listQuantities, chkOutOfStock, txtQuantity, attribute1Items, attribute2Items, productClassificationId, dataPrice, newestPostsContainer;\r\nvar activeProductClass;\r\nvar subscribeButton, discountPercentEle;\r\nvar flashSaleContainer, dataCountEle, dataProcessBarEle, dataDelPrice;\r\nvar isFistLoad = true;\r\nvar didScroll = false, listSections, dataHead, isClick = false;\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\",\r\n    function () {\r\n        init();\r\n        Site.LockOnsCroll = false;\r\n        var i;\r\n\r\n        for (i = 0; i < listQuantities.length; i++) {\r\n            const quantity = new Quantity();\r\n            quantity.Init(listQuantities[i], reloadMoneyAndQuantity);\r\n        }\r\n        for (i = 0; i < attribute1Items.length; i++) {\r\n            attribute1Items[i].addEventListener(\"change\", reloadMoneyAndQuantity);\r\n        }\r\n        for (i = 0; i < attribute2Items.length; i++) {\r\n            attribute2Items[i].addEventListener(\"change\", reloadMoneyAndQuantity);\r\n        }\r\n\r\n        reloadMoneyAndQuantity();\r\n        loadJqueryZoom();\r\n        try {\r\n            JsBarcode(\"._barcode\").init();\r\n        } catch (e) {\r\n            console.log(e);\r\n        }\r\n\r\n        load360Spin();\r\n        atiCopyRight();\r\n        //subscribeButton = document.getElementById('btnSubscribe');\r\n\r\n        //if (!!subscribeButton) {\r\n        //    subscribeButton.addEventListener('click',\r\n        //        function () {\r\n        //            PushNotifications.subscribeForPushNotifications(subscribeCallBack);\r\n        //        });\r\n        //}\r\n        PushNotifications.initialize();\r\n        submitProductWidgetAction(\"[data-related-products]\");\r\n        loadScrollNav();\r\n        LocalStorageHelper.LogCategory(productCategoryId, true, false, false, false);\r\n        const thumnailSrc = document.querySelector(\"[data-first-thumnail]\").dataset.firstThumnail;\r\n        LocalStorageHelper.LogProductClassIdView(activeProductClass.dataset.activeProductClassification, document.querySelector('[name=ProductName]').value, thumnailSrc, document.querySelector(\"link[rel='canonical']\").href);\r\n        processAnonymousUser();\r\n        innitFileUpload();\r\n        document.getElementById(\"btnReloadRatings\").click();\r\n    });\r\n\r\n\r\n\r\nfunction innitFileUpload() {\r\n    //----------------\r\n    //----------------\r\n    var imputDocumentFile = document.getElementById(\"inputRatingFormFile\");\r\n\r\n    const curentImageContactFilePath = !!imputDocumentFile.dataset.curentPathFiles && imputDocumentFile.dataset.curentPathFiles !== \"\"\r\n        ? [imputDocumentFile.dataset.curentPathFiles]\r\n        : null;\r\n\r\n    const curentImageContactBackgroundUrl =\r\n        !!imputDocumentFile.dataset.curentShowingImages && imputDocumentFile.dataset.curentShowingImages !== \"\"\r\n            ? [imputDocumentFile.dataset.curentShowingImages]\r\n            : null;\r\n\r\n    //\r\n    const dataMaxFile = !!imputDocumentFile.dataset.maxFile && imputDocumentFile.dataset.maxFile !== \"\"\r\n        ? +imputDocumentFile.dataset.maxFile\r\n        : 3;\r\n    const dataMaxSize = !!imputDocumentFile.dataset.maxFile && imputDocumentFile.dataset.maxSize !== \"\"\r\n        ? +imputDocumentFile.dataset.maxSize\r\n        : 5;\r\n    //\r\n\r\n    var fileUploadNewReview = new FileUpload();\r\n    fileUploadNewReview.Init(null,\r\n        curentImageContactFilePath,\r\n        curentImageContactBackgroundUrl,\r\n        \"#inputRatingFormFile\",//file\r\n        \"#newReviewContainer\",//review showing\r\n        \"#newReviewContainer\",//new showing\r\n        \"#frmProductRating\",\r\n        dataMaxFile,\r\n        console.log(\"change\"),\r\n        true,\r\n        \"RatingFormFile\", dataMaxSize);//unique name\r\n}\r\n\r\n//contact\r\nfunction clearform() {\r\n    $('#frmProductRating')[0].reset();\r\n    var imageReverContainer = document.getElementById(\"newReviewContainer\");\r\n\r\n    if (!!imageReverContainer) {\r\n        imageReverContainer.innerHTML = \"\";\r\n    }\r\n}\r\n\r\nfunction loadScrollNav() {\r\n    var btnNavs = document.querySelectorAll(\"[data-nav-product-detail] button\");\r\n    for (var i = 0; i < btnNavs.length; i++) {\r\n        btnNavs[i].addEventListener(\"click\",\r\n            function (eve) {\r\n                //Site.LockOnsCroll = true;\r\n                Site.ScrollToElement(\"[data-section='\" + eve.currentTarget.dataset.target + \"']\");\r\n                //setTimeout(function () {\r\n                //    //Site.LockOnsCroll = false;\r\n                //    document.querySelector(\"[data-head]\").classList.remove(\"_zDocActive\");\r\n                //}, 3000);\r\n            });\r\n    }\r\n\r\n    //window.onscroll = function () {\r\n    //    if (!Site.LockOnsCroll) {\r\n    //        updateZDocActive();\r\n    //    }\r\n    //};\r\n}\r\n\r\nfunction processFancybox() {\r\n    debugger;\r\n    //$(\"a._z-fancyBox\").fancybox();\r\n}\r\n\r\nfunction processAnonymousUser() {\r\n    var canvases = document.querySelectorAll(\"._id-listRatings canvas\");\r\n\r\n    for (var i = 0; i < canvases.length; i++) {\r\n        var canvas = canvases[i];\r\n\r\n        var name = canvas.dataset.userName,\r\n            nameSplit = name.split(\" \"),\r\n            initials = nameSplit.length > 2 ? nameSplit[0].charAt(0).toUpperCase() + nameSplit[1].charAt(0).toUpperCase() : nameSplit[0].charAt(0).toUpperCase();\r\n\r\n      \r\n        var context = canvas.getContext(\"2d\");\r\n\r\n        var canvasCssWidth = canvas.width,\r\n            canvasCssHeight = canvas.height;\r\n\r\n        if (window.devicePixelRatio) {\r\n            canvas.setAttribute(\"width\", canvasCssWidth * window.devicePixelRatio);\r\n            canvas.setAttribute(\"height\", canvasCssHeight * window.devicePixelRatio);\r\n            canvas.style.width= canvasCssWidth+\"px\";\r\n            canvas.style.height = canvasCssHeight + \"px\";\r\n            context.scale(window.devicePixelRatio, window.devicePixelRatio);\r\n        }\r\n\r\n        context.fillStyle = stringToHslColor(initials,30,80);\r\n        context.fillRect(0, 0, canvas.width, canvas.height);\r\n        context.font = (canvasCssHeight/2)+ \"px Arial\";\r\n        context.textAlign = \"center\";\r\n        context.fillStyle = \"#FFF\";\r\n        context.fillText(initials, canvasCssWidth / 2, canvasCssHeight / 1.5);\r\n    }\r\n}\r\n\r\nfunction stringToHslColor(str, s, l) {\r\n    var hash = 0;\r\n    for (var i = 0; i < str.length; i++) {\r\n        hash = str.charCodeAt(i) + ((hash << 5) - hash);\r\n    }\r\n\r\n    var h = hash % 360;\r\n    return 'hsl(' + h + ', ' + s + '%, ' + l + '%)';\r\n}\r\n\r\nvar zDockInterval = setInterval(function () {\r\n\r\n    var sectionActive = 1;\r\n    for (var i = 0; i < listSections.length; i++) {\r\n        if (!listSections[i]) {\r\n            continue;\r\n        }\r\n\r\n        if (listSections[i].getBoundingClientRect().y < 5) {\r\n            sectionActive = listSections[i].dataset.section;\r\n        }\r\n    }\r\n    dataHead.dataset.sessionActive = sectionActive;\r\n\r\n}, 100);\r\n\r\n\r\n\r\n//\r\nfunction loadFlashSaleSwiper() {\r\n    Site.bLazy.load(document.querySelectorAll(\".swiper-flashsale-container img\", true), false);\r\n\r\n    var isMobile = document.querySelector(\"[data-device=Mobile]\");\r\n    var isDesktop = document.querySelector(\"[data-device=Desktop]\");\r\n    var slidesPerView = 4;\r\n\r\n    if (isMobile) {\r\n        slidesPerView = 2;\r\n    }\r\n    else if (!isDesktop) {\r\n        slidesPerView = 3;\r\n    }\r\n\r\n\r\n    var flashSales = new Swiper('.swiper-flashsale-container',\r\n        {\r\n            slidesPerView: slidesPerView,\r\n            spaceBetween: -1,\r\n            slidesPerGroup: slidesPerView,\r\n            loop: false,\r\n            loopFillGroupWithBlank: true,\r\n            //pagination: {\r\n            //    el: '.swiper-pagination',\r\n            //    clickable: true,\r\n            //},\r\n            lazy: {\r\n                loadPrevNext: true\r\n            },\r\n            preloadImages: false,\r\n            autoplay: {\r\n                delay: 4000,\r\n                disableOnInteraction: false\r\n            },\r\n            navigation: {\r\n                nextEl: '.swiper-button-next',\r\n                prevEl: '.swiper-button-prev'\r\n            }\r\n        });\r\n}\r\n\r\nfunction atiCopyRight() {\r\n    var itemListElement = document.querySelector(\"[itemprop='itemListElement']:last-child\");\r\n    var text = itemListElement.innerText;\r\n    var url = itemListElement.querySelector(\"[content]\").attributes[\"content\"].value;\r\n\r\n    var fakaH3Tag = document.createElement(\"h3\");\r\n    fakaH3Tag.classList = \"d-none\";\r\n\r\n    var atag = document.createElement(\"a\");\r\n    atag.innerText =\"Nguồn: \"+ text + \" tại \" + window.location.hostname + \"\";\r\n    atag.href = url;\r\n    atag.alt = \"Chi tiết sản phẩm \" + text + \" tại \" + window.location.hostname + \". \";\r\n    atag.classList = \"_atyc\";\r\n    atag.setAttribute(\"style\", \"display:block !important;font-size:0 !important;height:0; color:transparent !important;  \");\r\n\r\n    fakaH3Tag.appendChild(atag);\r\n    fakaH3Tag.setAttribute(\"style\", \"display:block !important;font-size:0 !important;height:0; color:transparent !important;  \");\r\n\r\n    var container = document.querySelector(\"[data-html-content]\");\r\n    container.insertBefore(fakaH3Tag, container.querySelector(\"h3 ~ p\"));\r\n}\r\n\r\n\r\nfunction init() {\r\n    activeProductClass = document.querySelector(\"[data-active-product-classification]\");\r\n    listQuantities = document.querySelectorAll(\"._quantity\");\r\n    chkOutOfStock = document.querySelector(\"[data-out-of-stock]\");\r\n    txtQuantity = document.querySelector(\"[data-quantity]\");\r\n    attribute1Items = document.querySelectorAll('input[name=\"Attribute1Value\"]');\r\n    attribute2Items = document.querySelectorAll('input[name=\"Attribute2Value\"]');\r\n    productClassificationId = document.querySelector(\"[name=ProductClassificationId]\");\r\n    dataPrice = document.querySelector(\"[data-price]\");\r\n    dataDelPrice = document.querySelector(\"[data-del-price]\");\r\n\r\n    discountPercentEle = document.querySelector(\"[data-css-discount]\");\r\n    newestPostsContainer = document.querySelector(\"[data-selector-newest-post]\");\r\n    flashSaleContainer = document.querySelector(\"[data-flash-sale-detail]\");\r\n    dataCountEle = flashSaleContainer.querySelector(\"[data-count]\");\r\n    dataProcessBarEle = flashSaleContainer.querySelector(\"progress\");\r\n\r\n    listSections = [\r\n        document.querySelector(\"[data-section='1']\"),\r\n        document.querySelector(\"[data-section='2']\"),\r\n        document.querySelector(\"[data-section='3']\"),\r\n        document.querySelector(\"[data-section='4']\"),\r\n        document.querySelector(\"[data-section='5']\"),\r\n        document.querySelector(\"[data-section='6']\"),\r\n        document.querySelector(\"[data-section='7']\")\r\n    ];\r\n    dataHead = document.querySelector(\"main\");\r\n};\r\n\r\n\r\nfunction reloadMoneyAndQuantity() {\r\n    var attributeValue1 = !!document.querySelector('input[name=\"Attribute1Value\"]:checked') ? document.querySelector('input[name=\"Attribute1Value\"]:checked').value : \"\";\r\n    var attributeValue2 = !!document.querySelector('input[name=\"Attribute2Value\"]:checked') ? document.querySelector('input[name=\"Attribute2Value\"]:checked').value : \"\";\r\n\r\n    var selectedQuantityInfo = listPriceInfo.filter(function (item) {\r\n        return item.attribute1Value === attributeValue1 && item.attribute2Value === attributeValue2;\r\n    });\r\n    //TODO reload slider by productClass\r\n    activeProductClass.dataset.activeProductClassification = selectedQuantityInfo[0].productClassificationId;\r\n\r\n\r\n\r\n    LoadSwiperDefault();\r\n    if (isFistLoad) {\r\n        isFistLoad = false;\r\n    } else {\r\n        SlideToProductClass(selectedQuantityInfo[0].productClassificationId);\r\n    }\r\n\r\n    //TODO reload slider by productClass\r\n    if (selectedQuantityInfo.length === 0) {\r\n        chkOutOfStock.checked = true;\r\n        return;\r\n    };\r\n\r\n    history.replaceState(null, null, selectedQuantityInfo[0].url);\r\n    //location.replace(selectedQuantityInfo[0].url);\r\n\r\n    var quantity = selectedQuantityInfo[0].quantity;\r\n\r\n    productClassificationId.value = selectedQuantityInfo[0].productClassificationId;\r\n    chkOutOfStock.checked = quantity <= 0;\r\n    txtQuantity.max = quantity;\r\n\r\n    if (+txtQuantity.value > +txtQuantity.max) {\r\n        txtQuantity.value = +txtQuantity.max;\r\n    }\r\n    //\r\n    var selectedClassItem = listPriceInfo.filter(function (item) {\r\n        return item.attribute1Value === attributeValue1 && item.attribute2Value === attributeValue2;\r\n    })[0];\r\n\r\n    var quantitiesPrices = selectedClassItem.quantitiesPrice;\r\n\r\n    var priceUnit = quantitiesPrices[quantitiesPrices.length - 1].money;\r\n    for (let i = quantitiesPrices.length - 1; i >= 0; i--) {\r\n\r\n        if (quantitiesPrices[i].range !== 0 && +txtQuantity.value >= quantitiesPrices[i].range) {\r\n            break;\r\n        }\r\n\r\n        priceUnit = quantitiesPrices[i].money;\r\n    }\r\n\r\n    dataPrice.innerHTML = WNumbHelper.GetFrNumber(priceUnit) + \"<sup>đ</sup>\";\r\n    dataPrice.dataset.price = priceUnit;\r\n    dataPrice.style.visibility = \"visible\";\r\n\r\n    dataDelPrice.classList.add(\"hide\");\r\n    if (priceUnit < (+dataDelPrice.dataset.delPrice)) {\r\n        dataDelPrice.classList.remove(\"hide\");\r\n    }\r\n\r\n    discountPercentEle.classList.add(\"hide\");\r\n    var discountPercent = 100 - priceUnit * 100 / selectedClassItem.price;\r\n\r\n    if (discountPercent > 0) {\r\n        discountPercentEle.classList.remove(\"hide\");\r\n        discountPercentEle.innerText = (selectedClassItem.isFlashSale ? \"Flash Sale -\" : \"Giảm \") + Number(discountPercent).toFixed(2) + \"%\";\r\n    }\r\n\r\n    dataCountEle.removeAttribute(\"data-flash-deal-count-down\");\r\n    dataProcessBarEle.removeAttribute(\"data-is-host\");\r\n    flashSaleContainer.classList.add(\"hide\");\r\n\r\n    if (selectedClassItem.isFlashSale) {\r\n        flashSaleContainer.classList.remove(\"hide\");\r\n\r\n        if (selectedClassItem.valueQuantity <= 0) {\r\n            dataCountEle.dataset.flashDealCountDown = selectedClassItem.countDownTime;\r\n            checkTimeCountDown(\"[data-css-simple-detail]\");\r\n        }\r\n        else {\r\n            dataCountEle.innerText = \"còn \" + selectedClassItem.countDownQuantity + \" sản phẩm\";\r\n        }\r\n\r\n        if (selectedClassItem.valueQuantity * selectedClassItem.maxHours > selectedClassItem.hours * selectedClassItem.maxValueQuantity)//valueQuantity  / maxValueQuantity > hours / maxHours\r\n        {\r\n            debugger;\r\n            dataProcessBarEle.setAttribute(\"data-is-hot\", \"true\");\r\n            dataProcessBarEle.max = selectedClassItem.maxValueQuantity;\r\n            dataProcessBarEle.value = selectedClassItem.valueQuantity;\r\n        }\r\n        else {\r\n            dataProcessBarEle.removeAttribute(\"data-is-hot\");\r\n            dataProcessBarEle.max = selectedClassItem.maxHours;\r\n            dataProcessBarEle.value = selectedClassItem.hours;\r\n        }\r\n\r\n    }\r\n    //const rowItems = document.querySelectorAll(\"[data-class-id]\");\r\n    //var summaryMoney = 0;\r\n    //for (let i = 0; i < rowItems.length;i++) {\r\n    //    const unitPrice = +rowItems[i].querySelector(\"[data-unit-price]\").dataset.unitPrice;\r\n    //    const quantity = +rowItems[i].querySelector(\"[data-quantity]\").value;\r\n    //    const itemPrice = rowItems[i].querySelector(\"[data-item-price]\");\r\n    //    const itemMoney = unitPrice * quantity;\r\n    //    summaryMoney += itemMoney;\r\n    //    itemPrice.innerHTML = WNumbHelper.GetFrNumber(itemMoney);\r\n    //}\r\n    //const summaryItem = document.querySelector(\"[data-summary]\");\r\n    //summaryItem.innerHTML = WNumbHelper.GetFrNumber(summaryMoney);\r\n\r\n    var frmAddToCart = document.querySelector(\"#frmAddToCart\");\r\n\r\n    if (!!frmAddToCart) {\r\n        var productId = frmAddToCart.querySelectorAll('[name=ProductClassificationId]')[1].value ||\r\n            frmAddToCart.querySelectorAll('[name=ProductClassificationId]')[0].value;\r\n        var productClassSelected = document.querySelector('[data-css-simple-detail] [type=radio]:checked');\r\n        var productClassName = productClassSelected != null ? productClassSelected.value : \"\";\r\n        var productName = document.querySelector('[name=ProductName]').value;\r\n        EnhancedEcommerce.AddImpression(productId, productName, productClassName);\r\n    }\r\n\r\n}\r\nfunction updateAnalytic() {\r\n    var frmAddToCart = document.querySelector(\"#frmAddToCart\");\r\n\r\n    if (!!frmAddToCart) {\r\n        var productId = frmAddToCart.querySelectorAll('[name=ProductClassificationId]')[1].value ||\r\n            frmAddToCart.querySelectorAll('[name=ProductClassificationId]')[0].value;\r\n        var productClassSelected = document.querySelector('[data-css-simple-detail] [type=radio]:checked');\r\n        var productClassName = productClassSelected != null ? productClassSelected.value : \"\";\r\n        var productName = document.querySelector('[name=ProductName]').value;\r\n        var price = document.querySelector('[data-css-simple-detail] [data-price]').dataset.price;\r\n        EnhancedEcommerce.AddProduct(productId, productName, productClassName, '', '', price);\r\n    }\r\n\r\n}\r\n\r\nfunction btnByNowClick(eve) {\r\n    window.location = eve.target.dataset.href;\r\n}\r\n\r\nfunction load360Spin() {\r\n    var spritespin = document.querySelector('.spritespin');\r\n    if (spritespin) {\r\n        if (!!spritespin.dataset.width) {\r\n            $('.spritespin').spritespin({\r\n                source: image360Sources,\r\n                width: Math.min(document.querySelector('#spin360').getBoundingClientRect().width, 500),\r\n                height: Math.min(document.querySelector('#spin360').getBoundingClientRect().width, 500),               \r\n                // reverse interaction direction\r\n                sense: -1,\r\n                frameTime: 100,\r\n                responsive: false\r\n            });\r\n        } else {\r\n            $('.spritespin').spritespin({\r\n                source: image360Sources,\r\n                width: 500,\r\n                height: 500,\r\n                // reverse interaction direction\r\n                sense: -1,\r\n                frameTime: 100,\r\n                responsive: true\r\n            });\r\n        }\r\n\r\n    }\r\n}\r\n\r\nfunction ratingCompleteCallBack() {\r\n    console.log(\"Reload ratings\");\r\n\r\n    document.querySelector(\"#ratingSection details\").removeAttribute(\"open\");\r\n}\r\n\r\nfunction loadJqueryZoom() {\r\n    var isDesktop = document.querySelector(\"[data-device=Desktop]\");\r\n    if (!!isDesktop) {\r\n        var imageThumnails = document.querySelectorAll('[data-zoom]');\r\n\r\n        for (var i = 0; i < imageThumnails.length; i++) {\r\n            new Drift(imageThumnails[i], {\r\n                paneContainer: document.querySelector(\"[data-css-simple-detail]\")\r\n            });\r\n        }\r\n    }\r\n}\r\n\r\n\r\n"]}