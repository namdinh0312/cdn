{"version":3,"sources":["file-upload.js","contact-form.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"home-contact.bundle.js","sourcesContent":["\"use strict\";\r\n\r\n/* * * * * * * * * * * * * * * * *\r\n * LocalStorageHelper\r\n * javascript page navigation\r\n * * * * * * * * * * * * * * * * */\r\nfunction FileUpload() {\r\n    this.InputElement = null;\r\n    this.PreviewBoxElement = null;\r\n    this.CurentImageBox = null;\r\n    this.Form = null;\r\n    this.MaxFile = null;\r\n    this.StoredFiles = [];\r\n    this.CurentFiles = [];\r\n    this.CurentPreviewImages = [];\r\n    this.Extend = function (hostCdn, arrayCurentFileNames, arrayCurentPreviewImages, inputElement, curentImageBox, previewBoxEle, form, maxfile, inputChangeCallback, isCreateInputName, uniqueControlName, maxFileSize) {\r\n        var self = this;\r\n        this.InputElement = inputElement;\r\n        this.AcceptExtention = inputElement.accept.split(\",\");\r\n        this.PreviewBoxElement = previewBoxEle;\r\n        this.CurentImageBox = curentImageBox;\r\n        this.Form = form;\r\n        \r\n        this.UniqueControlName = (!uniqueControlName ? \"NewFiles\" + uniqueControlName : \"CurentFilePaths\") ;\r\n        this.MaxFile = maxfile || 2;\r\n        this.MaxFileSize = maxFileSize || 5*1024*1024; \r\n        this.InputChangeCallBack = inputChangeCallback !== undefined ? inputChangeCallback : null;\r\n        this.InputElement.addEventListener(\"change\", this.InputChange);\r\n        this.InputElement.fileUpload = this;\r\n        this.FileReader = new FileReader();\r\n        this.IsCreateInputName = isCreateInputName || false;\r\n        this.HostCdn = hostCdn || \"\";\r\n        this.CurentFiles = arrayCurentFileNames || [];\r\n        this.CurentPreviewImages = arrayCurentPreviewImages || [];\r\n        this.Process();\r\n    };\r\n\r\n    this.Process = function () {\r\n        if (!this.CurentImageBox) {\r\n            return;\r\n        }\r\n        var self = this;\r\n\r\n        for (let i = 0; i < this.CurentFiles.length; i++) {\r\n            var f = this.CurentFiles[i];\r\n            var reviewf = this.CurentPreviewImages[i];\r\n            var container = document.createElement(\"div\");\r\n            container.className = \"col-3 gutter-10 _p-item\";\r\n\r\n            var figure = document.createElement('figure');\r\n            figure.className = \"_max-height-200 relative hover-children-show\";\r\n            var btn = document.createElement('button');\r\n\r\n            btn.className = \"absolute hide tablet-show -border width-100 height-100 _fill-silver-opacity text-strong\";\r\n            btn.innerText = \"CLICK ĐỂ XÓA\";\r\n            btn.type = \"button\";\r\n            btn.dataset.file = f;\r\n            btn.dataset.notClose = \"I\";\r\n\r\n            btn.addEventListener(\"click\", function (evt) {\r\n                //var parentContainer = Site.FindParent(evt.target, '_p-item');\r\n                //parentContainer.remove();\r\n                self.RemoveCurentFile(evt, self.InputElement);\r\n            });\r\n\r\n            var fileName = f.substring(f.lastIndexOf('/') + 1);\r\n            var figureHtml;\r\n\r\n            if (!f.type.match(\"image.*\")) {\r\n                figureHtml =\r\n                    \"<img class='_max-width-100-percent'   onerror='this.src=\\\"/images/shared/no-image.svg\\\"'   src='\" +\r\n                    self.HostCdn +\r\n                    reviewf +\r\n                    \"' alt='\" +\r\n                    fileName +\r\n                    \"' data-file='\" +\r\n                    fileName +\r\n                    \"' /><figcaption class='padding-5 text-center _text-ellipsis'>\" +\r\n                    fileName +\r\n                    \"</figcaption>\";\r\n            } else {\r\n                var fileExt = fileName.substring(fileName.indexOf('.') + 1);\r\n                figureHtml = \"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512' version='1'><path d='M128 0c-18 0-32 14-32 32v448c0 18 14 32 32 32h320c18 0 32-14 32-32V128L352 0H128z' fill='#e2e5e7'/><path d='M384 128h96L352 0v96c0 18 14 32 32 32z' fill='#b0b7bd'/><path fill='#cad1d8' d='M480 224l-96-96h96z'/><path d='M416 416c0 9-7 16-16 16H48c-9 0-16-7-16-16V256c0-9 7-16 16-16h352c9 0 16 7 16 16v160z' fill='#f15642'/><path d='M400 432H96v16h304c9 0 16-7 16-16v-16c0 9-7 16-16 16z' fill='#cad1d8'/><text y='375' x='212' style='line-height:1.25;text-align:center' font-weight='400' font-size='147' font-family='sans-serif' letter-spacing='0' word-spacing='0' text-anchor='middle' stroke-width='3'><tspan style='line-height:1.25;-inkscape-font-specification:'monospace Bold';text-align:center' y='375' x='212' font-weight='700' font-family='monospace' fill='#fff'>\" + fileExt+\"</tspan></text></svg>\";\r\n            }\r\n            \r\n\r\n            if (self.IsCreateInputName) {\r\n                var input = \"<input type='text' class='_hidden'    name='\" + self.UniqueControlName + \"' value=\" + f + (!!self.Form ? \" form='\" + self.Form.id + \"'\" : \"\") + \"></input>\";\r\n                figureHtml += input;\r\n            }\r\n\r\n            figure.innerHTML = figureHtml;\r\n            figure.insertBefore(btn, figure.childNodes[0]);\r\n            container.appendChild(figure);\r\n            self.CurentImageBox.appendChild(container);\r\n        }\r\n    };\r\n    this.InputChange = function (evt) {\r\n        var self = evt.target.fileUpload;\r\n        var files = evt.target.files;\r\n        var filesArr = Array.prototype.slice.call(files);\r\n        self.PreviewBoxElement.innerHTML = \"\";\r\n        self.StoredFiles = [];\r\n\r\n        for (var i = 0; i < filesArr.length; i++) {\r\n            var f = filesArr[i];\r\n\r\n            if (f.size > self.MaxFileSize) {\r\n                Site.NotifyFormFailed(\"Lỗi\", \"File không được lớn hơn \" + self.MaxFileSize / (1024 * 1024) + \" mb\");\r\n                continue;\r\n            }\r\n\r\n            self.StoredFiles.push(f);\r\n\r\n            if (self.PreviewBoxElement === self.CurentImageBox) {\r\n                self.CurentFiles = [];\r\n                self.CurentImageBox.innerHTML = \"\";\r\n            }\r\n\r\n            if (self.StoredFiles.length + self.CurentFiles.length <= self.MaxFile) {\r\n                var reader = new FileReader();\r\n                reader.onload = function (e) {\r\n                    var fileReader = event.target;\r\n                    var container = document.createElement(\"div\");\r\n                    container.className = \"gutter-10 _p-item\";\r\n\r\n                    var figure = document.createElement('figure');\r\n                    figure.className = \"_max-height-200 relative hover-children-show\";\r\n\r\n                    var btn = document.createElement('button');\r\n                    btn.className = \"absolute hide -border width-100 height-100 _fill-silver-opacity text-strong\";\r\n                    btn.type = \"button\";\r\n                    btn.innerText = \"CLICK ĐỂ XÓA\";\r\n                    btn.dataset.file = fileReader.name;\r\n                    btn.dataset.notClose = \"I\";\r\n\r\n                    btn.addEventListener(\"click\", function (evt) {\r\n                        //var parentContainer = Site.FindParent(evt.target, '_p-item');\r\n                        //parentContainer.remove();\r\n                        self.RemoveFile(evt, self.InputElement);\r\n                    });\r\n                 \r\n                    var figureHtml;\r\n\r\n                    if (fileReader.fileType.match(\"image.*\")) {\r\n                        figureHtml = \"<img class='width-100 _max-width-100-percent' src='\" + e.target.result + \"' alt='\" + fileReader.name + \"' data-file='\" + fileReader.name + \"' /><figcaption class='padding-5 text-center _text-ellipsis'>\" + \"(\" + fileReader.size % 1000 + \" kb) \" + fileReader.name + \"</figcaption>\";\r\n                    } else {\r\n                        var fileExt = fileReader.name.substring(fileReader.name.indexOf('.') + 1);\r\n                        figureHtml = \"<svg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 512 512' version='1'><path d='M128 0c-18 0-32 14-32 32v448c0 18 14 32 32 32h320c18 0 32-14 32-32V128L352 0H128z' fill='#e2e5e7'/><path d='M384 128h96L352 0v96c0 18 14 32 32 32z' fill='#b0b7bd'/><path fill='#cad1d8' d='M480 224l-96-96h96z'/><path d='M416 416c0 9-7 16-16 16H48c-9 0-16-7-16-16V256c0-9 7-16 16-16h352c9 0 16 7 16 16v160z' fill='#f15642'/><path d='M400 432H96v16h304c9 0 16-7 16-16v-16c0 9-7 16-16 16z' fill='#cad1d8'/><text y='375' x='212' style='line-height:1.25;text-align:center' font-weight='400' font-size='147' font-family='sans-serif' letter-spacing='0' word-spacing='0' text-anchor='middle' stroke-width='3'><tspan style='line-height:1.25;-inkscape-font-specification:'monospace Bold';text-align:center' y='375' x='212' font-weight='700' font-family='monospace' fill='#fff'>\" + fileExt + \"</tspan></text></svg>\" + \"<figcaption class='padding-5 text-center _text-ellipsis'>\" + \"(\" + fileReader.size % 1000 + \" kb) \" + fileReader.name + \"</figcaption>\";\r\n                    }\r\n\r\n                    if (self.IsCreateInputName) {\r\n                        var input = \"<input type='text' class='_hidden' name='\" + self.UniqueControlName + \"[]' value=\" + fileReader.name + (!!self.Form ? \" form='\" + self.Form.id + \"'\" : \"\") + \"></input>\";\r\n                        figureHtml += input;\r\n                    }\r\n\r\n                    figure.innerHTML = figureHtml;\r\n                    figure.insertBefore(btn, figure.childNodes[0]);\r\n                    container.appendChild(figure);\r\n                    self.PreviewBoxElement.appendChild(container);\r\n                };\r\n                reader.size = f.size;\r\n                reader.fileType = f.type;\r\n                reader.name = f.name;\r\n                reader.readAsDataURL(f);\r\n            }\r\n        }\r\n       \r\n        if (!!self.InputChangeCallBack) {\r\n            self.InputChangeCallBack(self.StoredFiles);\r\n        }\r\n    };\r\n    this.RemoveCurentFile = function (evt) {\r\n        var file = evt.target.dataset.file;\r\n        for (var i = 0; i < this.CurentFiles.length; i++) {\r\n            if (this.CurentFiles[i] === file) {\r\n                this.CurentFiles.splice(i, 1);\r\n                break;\r\n            }\r\n        }\r\n        var parentContainer = Site.FindParent(evt.target, '_p-item');\r\n        parentContainer.remove();\r\n    };\r\n    this.RemoveFile = function (evt, fuploadElement) {\r\n        var file = evt.target.dataset.file;\r\n\r\n        for (var i = 0; i < this.StoredFiles.length; i++) {\r\n            if (this.StoredFiles[i].name === file) {\r\n                this.StoredFiles.splice(i, 1);\r\n                break;\r\n            }\r\n        }\r\n        var parentContainer = Site.FindParent(evt.target, '_p-item');\r\n        parentContainer.remove();\r\n\r\n        //debugger;\r\n        //this.InputElement.addEventListener(\"change\", this.InputChange);\r\n        Site.ClearInputFile(fuploadElement);\r\n    };\r\n    // init\r\n    this.Init = function (hostCdn, arrayCurentFileNames, arrayCurentPreviewImages, inputSelector, curentImageBoxSelector, previewBoxSelector, formSelector, maxFileCount, inputChangeCallback, isCreateInputName, uniqueControlName, maxFileSize) {\r\n\r\n        var inputEle = document.querySelector(inputSelector);\r\n        var previewBox = document.querySelector(previewBoxSelector);\r\n        var curentImageBox = document.querySelector(curentImageBoxSelector);\r\n        var form = document.querySelector(formSelector);\r\n\r\n        if (inputEle == null || previewBox == null) {\r\n            console.warn(inputSelector + \" or \" + previewBox + \": NULL\");\r\n        }\r\n\r\n        this.Extend(hostCdn, arrayCurentFileNames, arrayCurentPreviewImages, inputEle, curentImageBox, previewBox, form, maxFileCount, inputChangeCallback, isCreateInputName, uniqueControlName, maxFileSize);\r\n    };\r\n};","\"use strict\";\r\nvar imageCaptcha, fileUploadNewReview, imputDocumentFile;\r\n\r\nfunction initContactForm() {\r\n    imageCaptcha = document.querySelector(\"[data-captcha-container] ._image-wrap\");\r\n\r\n    if (!!imageCaptcha) {\r\n        imageCaptcha.addEventListener(\"click\", function (e) {\r\n            reloadImage();\r\n        });\r\n    }\r\n}\r\n\r\nfunction innitFileUpload() {\r\n    //----------------\r\n    //----------------\r\n    imputDocumentFile = document.getElementById(\"inputDetailFromFile\");\r\n\r\n    const curentImageContactFilePath = !!imputDocumentFile.dataset.curentPathFiles && imputDocumentFile.dataset.curentPathFiles !== \"\"\r\n        ? [imputDocumentFile.dataset.curentPathFiles]\r\n        : null;\r\n\r\n    const curentImageContactBackgroundUrl =\r\n        !!imputDocumentFile.dataset.curentShowingImages && imputDocumentFile.dataset.curentShowingImages !== \"\"\r\n            ? [imputDocumentFile.dataset.curentShowingImages]\r\n            : null;\r\n\r\n    //\r\n    const dataMaxFile = !!imputDocumentFile.dataset.maxFile && imputDocumentFile.dataset.maxFile !== \"\"\r\n        ? +imputDocumentFile.dataset.maxFile\r\n        : 3;\r\n    const dataMaxSize = !!imputDocumentFile.dataset.maxFile && imputDocumentFile.dataset.maxSize !== \"\"\r\n        ? +imputDocumentFile.dataset.maxSize\r\n        : 5;\r\n    //\r\n\r\n    fileUploadNewReview = new FileUpload();\r\n    fileUploadNewReview.Init(null,\r\n        curentImageContactFilePath,\r\n        curentImageContactBackgroundUrl,\r\n        \"#inputDetailFromFile\",//file\r\n        \"#newReviewContainer\",//review showing\r\n        \"#newReviewContainer\",//new showing\r\n        \"#frmContact\",\r\n        dataMaxFile,\r\n        console.log(\"change\"),\r\n        true,\r\n        \"DetailFormFile\", dataMaxSize);//unique name\r\n}\r\n\r\n//contact\r\nfunction clearform() {\r\n    $('#frmContact')[0].reset();\r\n    var imageReverContainer = document.getElementById(\"newReviewContainer\");\r\n\r\n    if (!!imageReverContainer) {\r\n        imageReverContainer.innerHTML = \"\";\r\n    }\r\n\r\n\r\n}\r\n\r\nfunction reloadImage() {\r\n    var d = new Date();\r\n    $(\"#img-captcha\").attr(\"src\", \"/get-captcha-image?\" + d.getTime());\r\n}\r\n\r\n\r\nfunction initMap() {\r\n    var mapContainer = document.getElementById('mapContainer');\r\n\r\n    if (!!mapContainer) {\r\n        var myLatLng = { lat: +mapContainer.dataset.lat, lng: +mapContainer.dataset.lng };\r\n\r\n        // Create a map object and specify the DOM element\r\n        // for display.\r\n        var map = new google.maps.Map(document.getElementById('mapContainer'), {\r\n            center: myLatLng,\r\n            zoom: 15,\r\n            disableDefaultUI: true\r\n        });\r\n\r\n        // Create a marker and set its position.\r\n        var marker = new google.maps.Marker({\r\n            map: map,\r\n            position: myLatLng,\r\n            title: mapContainer.dataset.title\r\n        });\r\n    }\r\n}"]}