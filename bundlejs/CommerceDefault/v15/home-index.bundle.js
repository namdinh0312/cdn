"use strict";var fileUploadNewReview,imputDocumentFile,imageCaptchaQuestion,fileUploadRatingQuestion,imputDocumentFileQuestion,inputUserNameQuestion,inputEmailQuestion,btnRemoveAnwerFor,spanUserName,inputParentId,textArea,btnLazyLoadProducts,imageCaptcha;function initContactForm(){(imageCaptcha=document.querySelector("[data-captcha-container] ._image-wrap"))&&imageCaptcha.addEventListener("click",function(e){reloadImage()}),innitFileUploadContactForm()}function innitFileUploadContactForm(){if(imputDocumentFile=document.getElementById("inputDetailFromFile")){var e=imputDocumentFile.dataset.curentPathFiles&&""!==imputDocumentFile.dataset.curentPathFiles?[imputDocumentFile.dataset.curentPathFiles]:null,t=imputDocumentFile.dataset.curentShowingImages&&""!==imputDocumentFile.dataset.curentShowingImages?[imputDocumentFile.dataset.curentShowingImages]:null,n=imputDocumentFile.dataset.maxFile&&""!==imputDocumentFile.dataset.maxFile?+imputDocumentFile.dataset.maxFile:3,a=imputDocumentFile.dataset.maxFile&&""!==imputDocumentFile.dataset.maxSize?+imputDocumentFile.dataset.maxSize:5;(fileUploadNewReview=new FileUpload).Init(null,e,t,"#inputDetailFromFile","#newReviewContainer","#newReviewContainer","#frmContact",n,console.log("change"),!0,"DetailFormFile",a)}}function clearform(){$("#frmContact")[0].reset();var e=document.getElementById("newReviewContainer");e&&(e.innerHTML="")}function reloadImage(){var e=new Date;$("#img-captcha").attr("src","/get-captcha-image?"+e.getTime())}function initMap(){var e=document.getElementById("mapContainer");if(e){var t={lat:+e.dataset.lat,lng:+e.dataset.lng},n=new google.maps.Map(document.getElementById("mapContainer"),{center:t,zoom:15,disableDefaultUI:!0});new google.maps.Marker({map:n,position:t,title:e.dataset.title})}}function innitFileUploadRatingQuestion(){if(imputDocumentFileQuestion=document.getElementById("inputRatingFormFileQuestion"),inputUserNameQuestion=document.querySelector("#frmProductQuestion #UserName"),inputEmailQuestion=document.querySelector("#frmProductQuestion #Email"),btnRemoveAnwerFor=document.querySelector("#frmProductQuestion [button-awser-for]"),spanUserName=document.querySelector("#frmProductQuestion [button-awser-for] [data-user-name]"),inputParentId=document.querySelector("#frmProductQuestion #ParentId"),textArea=document.querySelector("#frmProductQuestion textarea"),imputDocumentFileQuestion){var e=imputDocumentFileQuestion.dataset.curentPathFiles&&""!==imputDocumentFileQuestion.dataset.curentPathFiles?[imputDocumentFileQuestion.dataset.curentPathFiles]:null,t=imputDocumentFileQuestion.dataset.curentShowingImages&&""!==imputDocumentFileQuestion.dataset.curentShowingImages?[imputDocumentFileQuestion.dataset.curentShowingImages]:null,n=imputDocumentFileQuestion.dataset.maxFile&&""!==imputDocumentFileQuestion.dataset.maxFile?+imputDocumentFileQuestion.dataset.maxFile:3,a=imputDocumentFileQuestion.dataset.maxFile&&""!==imputDocumentFileQuestion.dataset.maxSize?+imputDocumentFileQuestion.dataset.maxSize:5;(fileUploadRatingQuestion=new FileUpload).Init(null,e,t,"#"+imputDocumentFileQuestion.id,"#reviewRatingQuestion","#reviewRatingQuestion","#frmProductQuestion",n,console.log("change"),!0,"RatingFormFile",a)}}function processAnwserForInForm(){btnRemoveAnwerFor.addEventListener("click",function(e){e.currentTarget.classList.add("hide"),inputParentId.value=""})}function processAnwerClick(){for(var e=document.querySelectorAll("._id-listRatingQuestions [data-awser]"),t=0;t<e.length;t++)e[t].addEventListener("click",function(e){inputParentId.value=e.target.dataset.awser,spanUserName.textContent=e.target.dataset.awserName,btnRemoveAnwerFor.classList.remove("hide"),Site.ScrollToElement("#frmProductQuestion [button-awser-for]"),textArea.focus()})}function processAnonymousAvarta(){for(var e=document.querySelectorAll("._id-listRatingQuestions canvas"),t=0;t<e.length;t++){var n=e[t],a=n.dataset.userName.split(" "),i=2<a.length?a[0].charAt(0).toUpperCase()+a[1].charAt(0).toUpperCase():a[0].charAt(0).toUpperCase(),o=n.getContext("2d"),r=n.width,u=n.height;window.devicePixelRatio&&(n.setAttribute("width",r*window.devicePixelRatio),n.setAttribute("height",u*window.devicePixelRatio),n.style.width=r+"px",n.style.height=u+"px",o.scale(window.devicePixelRatio,window.devicePixelRatio)),o.fillStyle=Site.StringToHslColor(i,30,80),o.fillRect(0,0,n.width,n.height),o.font=u/2+"px Arial",o.textAlign="center",o.fillStyle="#FFF",o.fillText(i,r/2,u/1.5)}}function reloadImageCapcha(){var e=new Date;$("#img-captcha").attr("src","/get-captcha-image?"+e.getTime())}function processUserNameEmail(){inputUserNameQuestion&&!inputUserNameQuestion.value&&(inputUserNameQuestion.value=sessionStorage.getItem("UserName"),inputEmailQuestion.value=sessionStorage.getItem("Email"))}function updateSessionUser(){sessionStorage.setItem("UserName",inputUserNameQuestion.value),sessionStorage.setItem("Email",inputEmailQuestion.value)}function processVote(){for(var e=document.querySelectorAll("[data-vote-up],[data-vote-down]"),t=0;t<e.length;t++)e[t].addEventListener("click",function(e){e.currentTarget.disabled=!0,AjaxRequest.SendRequestGetJson("POST","rating/changeRatingScore",{isUp:e.currentTarget.hasAttribute("data-vote-up"),ratingId:e.currentTarget.dataset.ratingId},function(e,t){for(var n=JSON.parse(e),a=document.querySelector("[data-vote-container='"+n.ratingId+"']"),i=a.querySelectorAll("[data-vote-up],[data-vote-down]"),o=0;o<i.length;o++)i[o].disabled=!1;n.result?(a.querySelector("[data-point]").textContent=n.upvoteCount-n.downVoteCount,Site.NotifyFormSuccess(n.title,n.message)):Site.NotifyFormInfo(n.title,n.message)})})}function loadSuggestProducts(){var e=document.querySelector("#formLazySuggestProduct #inputContainer");if(e){var t=LocalStorageHelper.Get(LocalStorageNamesEnum.UserCategoryList).sort(function(e,t){return 5*e.InOrderCount+3*e.CompleteCount+2*e.AddToCartCount+e.ViewCount>5*t.InOrderCount+3*t.CompleteCount+2*t.AddToCartCount+t.ViewCount?1:-1});t.length=Math.min(3,t.length);for(var n="",a=0;a<t.length;a++){n+='<input class="hide" type="text" name="CategoryLogModels['+a+'].CategoryId" value="'+t[a].CategoryId+'">'+('<input class="hide" type="number" name="CategoryLogModels['+a+'].ViewCount" value="'+t[a].ViewCount+'">')+('<input class="hide" type="number" name="CategoryLogModels['+a+'].AddToCartCount" value="'+t[a].AddToCartCount+'">')+('<input class="hide" type="number" name="CategoryLogModels['+a+'].InOrderCount" value="'+t[a].InOrderCount+'">')+('<input class="hide" type="number" name="CategoryLogModels['+a+'].CompleteCount" value="'+t[a].CompleteCount+'">')}e.innerHTML=n,document.getElementById("btnReloadSuggestProduct").click()}}function loadUserViewedProduct(){var e=LocalStorageHelper.Get(LocalStorageNamesEnum.ViewProductClassificationIds);if(e&&e.length){var t=document.querySelector("#productViewedContainer"),n=e.length;t.dataset.itemCount&&(n=Math.min(n,t.dataset.itemCount));for(var a=0;a<n;a++){var i=e[a],o='<a href="[ProductUrl]" title="[ProductName]" class="_image-wrap -tablet-margin-bottom rounded-4 border-1 solid border-silver padding-5"> <img alt="[ProductName]" loading="lazy" class="r-lazy" src="[ProductThumnailUrl]"></a>';o=(o=(o=o.replace(/\[ProductUrl\]/g,i.ProductUrl)).replace(/\[ProductName\]/g,i.ProductName)).replace(/\[ProductThumnailUrl\]/g,i.ProductThumnailUrl),i=Site.HtmlToElement(o),t.appendChild(i[0])}}}function pushNotificationCallBack(){PushNotifications.bindingUi("[data-contact]")}function init(){btnLazyLoadProducts=document.querySelectorAll("form[data-selector-lazyload-products] [type='submit']")}function lazyloadCategoriesProduct(){for(var e=0;e<btnLazyLoadProducts.length;e++)btnLazyLoadProducts[e].click()}function loadFlashSaleSwiper(){widgetFlashSaleSwiper(2,4,5)}function loadSwipper(e){e=e||".swiper-container",e+=" ",console.log(e);new Swiper(e,{autoplay:{delay:4e3,disableOnInteraction:!1},navigation:{nextEl:e+".swiper-button-next",prevEl:e+".swiper-button-prev"}})}function loadSwipperHome(e){new Swiper(e,{pagination:{el:e+" [data-pagination-1]",dynamicBullets:!0},autoplay:{delay:4e3,disableOnInteraction:!1},navigation:{nextEl:e+".swiper-button-next",prevEl:e+".swiper-button-prev"}})}function loadBrandSwipper(e){var t=document.querySelector("[data-device=Mobile]"),n=document.querySelector("[data-device=Desktop]"),a=8;t?a=3:n||(a=5);new Swiper(e+" .swiper-container",{slidesPerView:a,slidesPerGroup:a,loop:!0,loopFillGroupWithBlank:!0,spaceBetween:10,navigation:{nextEl:e+" .swiper-button-next-brand",prevEl:e+" .swiper-button-prev-brand"}})}document.addEventListener("DOMContentLoaded",function(){(imageCaptchaQuestion=document.querySelector("[data-captcha-container] ._image-wrap"))&&imageCaptchaQuestion.addEventListener("click",function(e){reloadImageCapcha()}),innitFileUploadRatingQuestion(),processUserNameEmail(),processVote(),processAnonymousAvarta(),processAnwserForInForm(),processAnwerClick()}),document.addEventListener("DOMContentLoaded",function(){loadUserViewedProduct()}),document.addEventListener("DOMContentLoaded",function(){init(),loadSwipperHome("[data-container-slider] .swiper-container"),loadSwipper("[data-review] .swiper-container"),loadBrandSwipper("[data-brand-name]"),lazyloadCategoriesProduct(),PushNotifications.initialize(pushNotificationCallBack),loadSuggestProducts()}),window.addEventListener&&window.addEventListener("load",function(){submitProductWidgetAction("[data-bestseller]"),submitProductWidgetAction("[data-new-products]")}),window.onload=function(){submitProductWidgetAction("[data-bestseller]"),submitProductWidgetAction("[data-new-products]")};